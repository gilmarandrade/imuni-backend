(function(e){function t(t){for(var o,i,r=t[0],d=t[1],l=t[2],u=0,m=[];u<r.length;u++)i=r[u],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&m.push(s[i][0]),s[i]=0;for(o in d)Object.prototype.hasOwnProperty.call(d,o)&&(e[o]=d[o]);c&&c(t);while(m.length)m.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],o=!0,r=1;r<a.length;r++){var d=a[r];0!==s[d]&&(o=!1)}o&&(n.splice(t--,1),e=i(i.s=a[0]))}return e}var o={},s={app:0},n=[];function i(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=o,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(a,o,function(t){return e[t]}.bind(null,o));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],d=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var c=d;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"009d":function(e,t,a){},"0230":function(e,t,a){},"034f":function(e,t,a){"use strict";var o=a("85ec"),s=a.n(o);s.a},"042c":function(e,t,a){},"0c4d":function(e,t,a){"use strict";var o=a("a8fa"),s=a.n(o);s.a},1099:function(e,t,a){},"10d3":function(e,t,a){},1157:function(e,t,a){"use strict";var o=a("1f3d"),s=a.n(o);s.a},"17a5":function(e,t,a){},"1f3d":function(e,t,a){},2175:function(e,t,a){"use strict";var o=a("5ce0"),s=a.n(o);s.a},2442:function(e,t,a){},"272e":function(e,t,a){},"2dd6":function(e,t,a){"use strict";var o=a("1099"),s=a.n(o);s.a},"32a6":function(e,t,a){},"3cef":function(e,t,a){"use strict";var o=a("a52b"),s=a.n(o);s.a},"3f89":function(e,t,a){"use strict";var o=a("042c"),s=a.n(o);s.a},"425b":function(e,t,a){"use strict";var o=a("4636"),s=a.n(o);s.a},4636:function(e,t,a){},"4b57":function(e,t,a){"use strict";var o=a("df2f"),s=a.n(o);s.a},"534b":function(e,t,a){"use strict";var o=a("10d3"),s=a.n(o);s.a},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:{"hide-menu":!e.isMenuVisible},attrs:{id:"app"}},[a("Header",{attrs:{title:"IMUNI",hideToggle:!e.user,hideUserDropdown:!e.user}}),e.user?a("Menu"):e._e(),e.isLoadingApp?a("Loading"):a("Content"),a("Footer")],1)},n=[],i=(a("b0c0"),a("96cf"),a("1da1")),r=a("bc3a"),d=a.n(r),l=(a("99af"),a("53ca")),c="__frente_prevencao_covid_rn",u="https://imuni.app.br/api",m="BETA";function f(e){e&&e.response&&e.response.data?(console.error(e.response.data),o["default"].toasted.global.defaultError({msg:e.response.data})):"string"===typeof e||"object"===Object(l["a"])(e)?(console.error(e),o["default"].toasted.global.defaultError({msg:e})):o["default"].toasted.global.defaultError()}function p(e,t){return"/unidades/".concat(e.unidadeId,"/cadastrarAtendimento?idIdoso=").concat(e._id,"&idVigilante=").concat(t.id,"&idUnidade=").concat(e.unidadeId,"&nomeIdoso=").concat(e.nome,"&tipoAtendimento=").concat(e.estatisticas&&e.estatisticas.qtdAtendimentosEfetuados>0?"Acompanhamento":"Primeiro atendimento")}function v(e,t,a,o){return console.log("1FAIpQLSd-6JvODh3gkPLdSogP5doEGgywkKSSBCIyk5tTPTtiiS0Dtw"),"https://docs.google.com/forms/d/e/".concat("1FAIpQLSd-6JvODh3gkPLdSogP5doEGgywkKSSBCIyk5tTPTtiiS0Dtw","/viewform?entry.1400965172=").concat(e,"&entry.107358182=").concat(t,"&entry.1292516784=").concat(a,"&entry.2065609378=").concat(o,"&embedded=true")}function b(e){return new Date(e).toLocaleString()}var h=a("2f62"),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticClass:"header"},[a("h1",{staticClass:"title"},[e._v(" "+e._s(e.title)+" "),"TEST"==e.appMode?a("span",{staticClass:"badge bg-danger"},[e._v("MODO TESTE")]):e._e()]),e.hideUserDropdown?e._e():a("UserDropdown")],1)},_=[],I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-dropdown"},[a("div",{staticClass:"user-button"},[a("span",{staticClass:"d-none d-sm-block"},[e._v(e._s(e.user.name))]),a("div",{staticClass:"user-dropdown-img"},[a("Gravatar",{attrs:{email:e.user.email,alt:"User"}})],1),a("font-awesome-icon",{attrs:{icon:["fas","angle-down"]}})],1),a("div",{staticClass:"user-dropdown-content"},[a("div",[e._v(" "+e._s(e.user.role)+" ")]),a("div",[e._v(" "+e._s(e.user.email)+" ")]),a("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.logout(t)}}},[e._v(" Sair ")])])])},x=[],k=a("e06a"),A=a.n(k),y={name:"UserDropdown",components:{Gravatar:A.a},computed:Object(h["b"])(["user"]),methods:{logout:function(){localStorage.removeItem(c),this.$store.commit("setUser",null),this.$router.push({name:"auth"})}}},C=y,w=(a("a09f"),a("2877")),E=Object(w["a"])(C,I,x,!1,null,null,null),O=E.exports,S={name:"Header",components:{UserDropdown:O},data:function(){return{appMode:m,syncState:"synced",lastSync:"00/00/0000 00:00"}},props:{title:String,hideToggle:Boolean,hideUserDropdown:Boolean},computed:{isMenuVisible:function(){return this.$store.state.isMenuVisible}},methods:{toggleMenu:function(){this.$store.commit("toggleMenu")}}},U=S,$=(a("9f34"),Object(w["a"])(U,g,_,!1,null,null,null)),P=$.exports,V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("aside",{directives:[{name:"show",rawName:"v-show",value:e.isMenuVisible,expression:"isMenuVisible"}],staticClass:"menu"})},N=[],T={name:"Menu",computed:Object(h["b"])(["isMenuVisible"])},D=T,R=(a("4b57"),Object(w["a"])(D,V,N,!1,null,null,null)),j=R.exports,q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("ProgressBar"),a("router-view")],1)},M=[],B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"progressBar",class:{isLoading:"LOADING"===e.syncStatus.status,indeterminated:"INDETERMINATED"===e.syncStatus.mode}},[a("div",{staticClass:"bar",style:{width:e.syncStatus.progress+"%"}}),e._v(" "+e._s(e.syncStatus)+" ")])},L=[],F={name:"ProgressBar",computed:Object(h["b"])(["syncStatus"])},G=F,z=(a("7264"),Object(w["a"])(G,B,L,!1,null,null,null)),H=z.exports,K={name:"Content",components:{ProgressBar:H}},Y=K,J=(a("9551"),Object(w["a"])(Y,q,M,!1,null,null,null)),W=J.exports,X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("footer",{staticClass:"footer"},[a("span",[e._v("Sistema IMUNI | Inteligência de Monitoramento Unificado | "+e._s(e.appVersion)+" ")]),"TEST"==e.appMode?a("span",{staticClass:"badge bg-danger ml-2"},[e._v("MODO TESTE")]):e._e(),"BETA"==e.appMode?a("span",{staticClass:"badge bg-info ml-2"},[e._v("VERSÃO BETA")]):e._e()])},Q=[],Z={name:"Footer",data:function(){return{appMode:m}},computed:{appVersion:function(){return this.$store.getters.appVersion}}},ee=Z,te=(a("2175"),Object(w["a"])(ee,X,Q,!1,null,null,null)),ae=te.exports,oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"loading"},[a("font-awesome-icon",{attrs:{icon:["fas","spinner"],size:"5x",pulse:""}})],1)},se=[],ne={name:"Loading"},ie=ne,re=(a("2dd6"),Object(w["a"])(ie,oe,se,!1,null,null,null)),de=re.exports,le={name:"App",components:{Header:P,Menu:j,Content:W,Footer:ae,Loading:de},data:function(){return{mensagem:"digite sua mensagem"}},computed:Object(h["b"])(["isMenuVisible","user","isLoadingApp"]),methods:{validateToken:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("acceptInvitation"!==e.$route.name&&"resetPassword"!==e.$route.name&&"auth"!==e.$route.name){t.next=3;break}return e.$store.commit("setIsLoadingApp",!1),t.abrupt("return");case 3:if(console.log("validating token"),e.$store.commit("setIsLoadingApp",!0),a=localStorage.getItem(c),o=JSON.parse(a),e.$store.commit("setUser",null),console.log(o),o){t.next=13;break}return e.$store.commit("setIsLoadingApp",!1),e.$router.push({name:"auth"}),t.abrupt("return");case 13:return t.next=15,d.a.post("".concat(u,"/v2/validateToken"),o);case 15:s=t.sent,console.log(s),s.data?e.$store.commit("setUser",o):(localStorage.removeItem(c),e.$router.push({name:"auth"})),e.$store.commit("setIsLoadingApp",!1);case 19:case"end":return t.stop()}}),t)})))()}},created:function(){this.validateToken()}},ce=le,ue=(a("034f"),Object(w["a"])(ce,s,n,!1,null,null,null)),me=ue.exports,fe=a("a65d"),pe=a.n(fe),ve=(a("45fc"),a("8c4f")),be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("Breadcrumb",{attrs:{path:[{text:"Dashboard"}]}}),a("PageTitle",{attrs:{icon:"",main:"Home",sub:"Bem vindo ao sistema de monitoramento"}}),"ADMINISTRADOR"===e.user.role?a("div",[a("ul",[a("li",[a("router-link",{attrs:{to:"/unidades"}},[e._v("unidades")])],1),a("li",[a("router-link",{attrs:{to:"/administradores"}},[e._v("administradores")])],1)])]):e._e(),"VIGILANTE"===e.user.role?a("div",[a("h2",[e._v("Seja bem vindo vigilante")]),a("router-link",{attrs:{to:"/meusIdosos/com-escalas"}},[e._v("Meus idosos")])],1):e._e(),"PRECEPTOR"===e.user.role?a("div",[a("h2",[e._v("Seja bem vindo preceptor")]),a("router-link",{attrs:{to:"/meusIdosos/com-escalas"}},[e._v("Meus idosos")])],1):e._e()],1)},he=[],ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-title"},[a("h1",[e.icon?a("i",{class:e.icon}):e._e(),e._v(" "+e._s(e.main))]),a("h2",[e._v(e._s(e.sub))]),a("hr")])},_e=[],Ie={name:"PageTitle",props:["icon","main","sub"]},xe=Ie,ke=(a("a405"),Object(w["a"])(xe,ge,_e,!1,null,null,null)),Ae=ke.exports,ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"breadcrumb"},[a("ul",e._l(e.path,(function(t,o){return a("li",{key:t.text},[o>0?a("font-awesome-icon",{staticClass:"mx-2",attrs:{icon:["fas","angle-right"]}}):e._e(),t.url?a("router-link",{attrs:{to:t.url,title:t.text}},[e._v(e._s(t.text))]):a("span",[e._v(e._s(t.text))])],1)})),0)])},Ce=[],we={name:"Breadcrumb",props:["path"]},Ee=we,Oe=(a("9f4a"),Object(w["a"])(Ee,ye,Ce,!1,null,null,null)),Se=Oe.exports,Ue={name:"Home",components:{PageTitle:Ae,Breadcrumb:Se},data:function(){return{}},methods:{},computed:Object(h["b"])(["user"]),mounted:function(){}},$e=Ue,Pe=Object(w["a"])($e,be,he,!1,null,null,null),Ve=Pe.exports,Ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("PageTitle",{attrs:{icon:"",main:"Planilha Idosos",sub:"unidade xxxx"}}),a("b-card",{attrs:{"no-body":""}},[a("b-tabs",{attrs:{card:""}},[a("b-tab",{attrs:{title:"Idosos",active:""}},[a("IdososPage")],1),a("b-tab",{attrs:{title:"Idosos por Vulnerabilidade"}},[a("IdososPorVulnerabilidadePage")],1),a("b-tab",{attrs:{title:"Idosos por Risco"}},[a("IdososPorRiscoPage")],1),a("b-tab",{attrs:{title:"Idosos com Escalas"}},[a("IdososComEscalaPage")],1),a("b-tab",{attrs:{title:"Idosos em ordem Alfabética"}},[a("IdososOrdemAlfabeticaPage")],1)],1)],1)],1)},Te=[],De=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[e._v("foram encontrados "+e._s(e.idosos.length)+" registros")]),a("b-table",{attrs:{hover:"",items:e.idosos,fields:e.fields}})],1)},Re=[],je=(a("4160"),a("159b"),{name:"IdososPage",data:function(){return{idosos:[],fields:[{key:"row",label:"row",sortable:!0},{key:"dataNascimento",label:"Data de Nascimento",sortable:!0},{key:"nome",label:"Nome",sortable:!0},{key:"telefone1",label:"Telefone 1",sortable:!0},{key:"telefone2",label:"Telefone 2",sortable:!0},{key:"agenteSaude",label:"Agente de Saúde",sortable:!0}]}},methods:{loadIdosos:function(){var e=this;console.log("load idosos");var t="1sP1UegbOnv5dVoO6KMtk2nms6HqjFs3vuYN5FGMWasc",a="Idosos",o="A2:E";console.log("idosos base api url",u);var s="".concat(u,"/docs/").concat(t,"/sheets/").concat(a,"/range/").concat(o);d.a.get(s).then((function(t){var a=[];t.data.forEach((function(e,t){a.push({row:"A"+(t+2),dataNascimento:e[0],nome:e[1],telefone1:e[2],telefone2:e[3],agenteSaude:e[4]})})),e.idosos=a,console.log(e.idosos)})).catch(f)}},mounted:function(){this.loadIdosos()}}),qe=je,Me=Object(w["a"])(qe,De,Re,!1,null,null,null),Be=Me.exports,Le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[e._v("foram encontrados "+e._s(e.idosos.length)+" registros")]),a("b-table",{attrs:{hover:"",items:e.idosos,fields:e.fields}})],1)},Fe=[],Ge={name:"IdososPorVulnerabilidadePage",data:function(){return{idosos:[],fields:[{key:"row",label:"row",sortable:!0},{key:"nome",label:"Nome",sortable:!0},{key:"escalaVulnerabilidade",label:"Escala de Vulnerabilidade",sortable:!0},{key:"escalaEpidemiologica",label:"Escala Epidemiológica",sortable:!0},{key:"escalaRisco",label:"Escala de Risco COVID-19",sortable:!0},{key:"scoreOrdenacao",label:"Score de Ordenacao",sortable:!0}]}},methods:{loadIdosos:function(){var e=this;console.log("load idosos");var t="1sP1UegbOnv5dVoO6KMtk2nms6HqjFs3vuYN5FGMWasc",a="Idosos por vulnerabilidade",o="A2:E",s="".concat(u,"/docs/").concat(t,"/sheets/").concat(a,"/range/").concat(o);d.a.get(s).then((function(t){var a=[];t.data.forEach((function(e,t){a.push({row:"A"+(t+2),nome:e[0],escalaVulnerabilidade:e[1],escalaEpidemiologica:e[2],escalaRisco:e[3],scoreOrdenacao:e[4]})})),e.idosos=a,console.log(e.idosos)})).catch(f)}},mounted:function(){this.loadIdosos()}},ze=Ge,He=Object(w["a"])(ze,Le,Fe,!1,null,null,null),Ke=He.exports,Ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[e._v("foram encontrados "+e._s(e.idosos.length)+" registros")]),a("b-table",{attrs:{hover:"",items:e.idosos,fields:e.fields}})],1)},Je=[],We={name:"IdososPorRiscoPage",data:function(){return{idosos:[],fields:[{key:"row",label:"row",sortable:!0},{key:"nome",label:"Nome",sortable:!0},{key:"escalaVulnerabilidade",label:"Escala de Vulnerabilidade",sortable:!0},{key:"escalaEpidemiologica",label:"Escala Epidemiológica",sortable:!0},{key:"escalaRisco",label:"Escala de Risco COVID-19",sortable:!0},{key:"scoreOrdenacao",label:"Score de Ordenacao",sortable:!0}]}},methods:{loadIdosos:function(){var e=this;console.log("load idosos");var t="1sP1UegbOnv5dVoO6KMtk2nms6HqjFs3vuYN5FGMWasc",a="Idosos por risco",o="A2:E",s="".concat(u,"/docs/").concat(t,"/sheets/").concat(a,"/range/").concat(o);d.a.get(s).then((function(t){var a=[];t.data.forEach((function(e,t){a.push({row:"A"+(t+2),nome:e[0],escalaVulnerabilidade:e[1],escalaEpidemiologica:e[2],escalaRisco:e[3],scoreOrdenacao:e[4]})})),e.idosos=a,console.log(e.idosos)})).catch(f)}},mounted:function(){this.loadIdosos()}},Xe=We,Qe=Object(w["a"])(Xe,Ye,Je,!1,null,null,null),Ze=Qe.exports,et=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[e._v("foram encontrados "+e._s(e.idosos.length)+" registros")]),a("b-table",{attrs:{hover:"",items:e.idosos,fields:e.fields}})],1)},tt=[],at={name:"IdososComEscalaPage",data:function(){return{idosos:[],fields:[{key:"row",label:"row",sortable:!0},{key:"nome",label:"Nome",sortable:!0},{key:"escalaVulnerabilidade",label:"Escala de Vulnerabilidade",sortable:!0},{key:"escalaEpidemiologica",label:"Escala Epidemiológica",sortable:!0},{key:"escalaRisco",label:"Escala de Risco COVID-19",sortable:!0},{key:"scoreOrdenacao",label:"Score de Ordenacao",sortable:!0}]}},methods:{loadIdosos:function(){var e=this;console.log("load idosos");var t="1sP1UegbOnv5dVoO6KMtk2nms6HqjFs3vuYN5FGMWasc",a="Idosos com escalas",o="A2:E",s="".concat(u,"/docs/").concat(t,"/sheets/").concat(a,"/range/").concat(o);d.a.get(s).then((function(t){var a=[];t.data.forEach((function(e,t){a.push({row:"A"+(t+2),nome:e[0],escalaVulnerabilidade:e[1],escalaEpidemiologica:e[2],escalaRisco:e[3],scoreOrdenacao:e[4]})})),e.idosos=a,console.log(e.idosos)})).catch(f)}},mounted:function(){this.loadIdosos()}},ot=at,st=Object(w["a"])(ot,et,tt,!1,null,null,null),nt=st.exports,it=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[e._v("foram encontrados "+e._s(e.idosos.length)+" registros")]),a("b-table",{attrs:{hover:"",items:e.idosos,fields:e.fields}})],1)},rt=[],dt={name:"IdososOrdemAlfabeticaPage",data:function(){return{idosos:[],fields:[{key:"row",label:"row",sortable:!0},{key:"nome",label:"Nome",sortable:!0}]}},methods:{loadIdosos:function(){var e=this;console.log("load idosos");var t="1sP1UegbOnv5dVoO6KMtk2nms6HqjFs3vuYN5FGMWasc",a="Idosos em ordem alfabética",o="A2:A",s="".concat(u,"/docs/").concat(t,"/sheets/").concat(a,"/range/").concat(o);d.a.get(s).then((function(t){var a=[];t.data.forEach((function(e,t){a.push({row:"A"+(t+2),nome:e[0]})})),e.idosos=a,console.log(e.idosos)})).catch(f)}},mounted:function(){this.loadIdosos()}},lt=dt,ct=Object(w["a"])(lt,it,rt,!1,null,null,null),ut=ct.exports,mt={name:"IdososSpreadsheet",components:{PageTitle:Ae,IdososPage:Be,IdososPorVulnerabilidadePage:Ke,IdososPorRiscoPage:Ze,IdososComEscalaPage:nt,IdososOrdemAlfabeticaPage:ut}},ft=mt,pt=Object(w["a"])(ft,Ne,Te,!1,null,null,null),vt=pt.exports,bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("PageTitle",{attrs:{icon:"",main:"Planilha de Gerenciamento",sub:"unidade xxxx"}}),a("b-card",{attrs:{"no-body":""}},[a("b-tabs",{attrs:{card:""}},[a("b-tab",{attrs:{title:"Vigilante 1"}},[a("Vigilante1Page")],1),a("b-tab",{attrs:{title:"Vigilante 2"}},[a("Vigilante2Page")],1),a("b-tab",{attrs:{title:"Vigilante 3"}},[a("Vigilante3Page")],1),a("b-tab",{attrs:{title:"Vigilante 4"}},[a("Vigilante4Page")],1),a("b-tab",{attrs:{title:"Respostas"}},[a("RespostasPage")],1),a("b-tab",{attrs:{title:"Escalas"}},[a("EscalasPage")],1),a("b-tab",{attrs:{title:"Status Atendimentos"}},[a("StatusAtendimentosPage")],1)],1)],1)],1)},ht=[],gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[e._v("foram encontrados "+e._s(e.items.length)+" registros")]),a("b-table",{attrs:{hover:"",items:e.items,fields:e.fields}})],1)},_t=[],It={name:"Vigilante1Page",data:function(){return{items:[],fields:[{key:"row",label:"row",sortable:!0},{key:"vigilante",label:"Vigilante",sortable:!0},{key:"nome",label:"Nome",sortable:!0},{key:"telefone1",label:"Telefones",sortable:!0},{key:"agenteSaude",label:"Agente de Saúde",sortable:!0},{key:"atendimentosEfetuados",label:"Atendimentos Efetuados",sortable:!0},{key:"escalaVulnerabilidade",label:"Escala Vulnerabilidade",sortable:!0},{key:"escalaEpidemiologica",label:"Escala Epidemiológica",sortable:!0},{key:"escalaRisco",label:"Escala Risco COVID-19",sortable:!0},{key:"dataUltimoAtendimento",label:"Último Atendimento",sortable:!0},{key:"sugestaoProximoAtendimento",label:"Sugestão próximo atendimento",sortable:!0}]}},methods:{loadItems:function(){var e=this;console.log("load items");var t="1tBlFtcTlo1xtq4lU1O2Yq94wYaFfyL9RboX6mWjKhh4",a="Vigilante 1",o="A2:M",s="".concat(u,"/docs/").concat(t,"/sheets/").concat(a,"/range/").concat(o);d.a.get(s).then((function(t){var a=[];t.data.forEach((function(e,t){a.push({row:"A"+(t+2),vigilante:e[0],nome:e[1],telefone1:"".concat(e[2]," ").concat(e[3]),agenteSaude:e[4],tentativas:e[5],atendimentosEfetuados:"".concat(+e[6],"/").concat(+e[5]+ +e[6]),escalaVulnerabilidade:e[7],escalaEpidemiologica:e[8],escalaRisco:e[9],dataUltimoAtendimento:"".concat(e[10]," ").concat(e[11]),horaUltimoAtendimento:e[11],sugestaoProximoAtendimento:e[12]})})),e.items=a,console.log(e.items)})).catch(f)}},mounted:function(){this.loadItems()}},xt=It,kt=Object(w["a"])(xt,gt,_t,!1,null,null,null),At=kt.exports,yt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[e._v("foram encontrados "+e._s(e.items.length)+" registros")]),a("b-table",{attrs:{hover:"",items:e.items,fields:e.fields}})],1)},Ct=[],wt={name:"Vigilante2Page",data:function(){return{items:[],fields:[{key:"row",label:"row",sortable:!0},{key:"vigilante",label:"Vigilante",sortable:!0},{key:"nome",label:"Nome",sortable:!0},{key:"telefone1",label:"Telefones",sortable:!0},{key:"agenteSaude",label:"Agente de Saúde",sortable:!0},{key:"atendimentosEfetuados",label:"Atendimentos Efetuados",sortable:!0},{key:"escalaVulnerabilidade",label:"Escala Vulnerabilidade",sortable:!0},{key:"escalaEpidemiologica",label:"Escala Epidemiológica",sortable:!0},{key:"escalaRisco",label:"Escala Risco COVID-19",sortable:!0},{key:"dataUltimoAtendimento",label:"Último Atendimento",sortable:!0},{key:"sugestaoProximoAtendimento",label:"Sugestão próximo atendimento",sortable:!0}]}},methods:{loadItems:function(){var e=this;console.log("load items");var t="1tBlFtcTlo1xtq4lU1O2Yq94wYaFfyL9RboX6mWjKhh4",a="Vigilante 2",o="A2:M",s="".concat(u,"/docs/").concat(t,"/sheets/").concat(a,"/range/").concat(o);d.a.get(s).then((function(t){var a=[];t.data.forEach((function(e,t){a.push({row:"A"+(t+2),vigilante:e[0],nome:e[1],telefone1:"".concat(e[2]," ").concat(e[3]),agenteSaude:e[4],tentativas:e[5],atendimentosEfetuados:"".concat(+e[6],"/").concat(+e[5]+ +e[6]),escalaVulnerabilidade:e[7],escalaEpidemiologica:e[8],escalaRisco:e[9],dataUltimoAtendimento:"".concat(e[10]," ").concat(e[11]),horaUltimoAtendimento:e[11],sugestaoProximoAtendimento:e[12]})})),e.items=a,console.log(e.items)})).catch(f)}},mounted:function(){this.loadItems()}},Et=wt,Ot=Object(w["a"])(Et,yt,Ct,!1,null,null,null),St=Ot.exports,Ut=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[e._v("foram encontrados "+e._s(e.items.length)+" registros")]),a("b-table",{attrs:{hover:"",items:e.items,fields:e.fields}})],1)},$t=[],Pt={name:"Vigilante3Page",data:function(){return{items:[],fields:[{key:"row",label:"row",sortable:!0},{key:"vigilante",label:"Vigilante",sortable:!0},{key:"nome",label:"Nome",sortable:!0},{key:"telefone1",label:"Telefones",sortable:!0},{key:"agenteSaude",label:"Agente de Saúde",sortable:!0},{key:"atendimentosEfetuados",label:"Atendimentos Efetuados",sortable:!0},{key:"escalaVulnerabilidade",label:"Escala Vulnerabilidade",sortable:!0},{key:"escalaEpidemiologica",label:"Escala Epidemiológica",sortable:!0},{key:"escalaRisco",label:"Escala Risco COVID-19",sortable:!0},{key:"dataUltimoAtendimento",label:"Último Atendimento",sortable:!0},{key:"sugestaoProximoAtendimento",label:"Sugestão próximo atendimento",sortable:!0}]}},methods:{loadItems:function(){var e=this;console.log("load items");var t="1tBlFtcTlo1xtq4lU1O2Yq94wYaFfyL9RboX6mWjKhh4",a="Vigilante 3",o="A2:M",s="".concat(u,"/docs/").concat(t,"/sheets/").concat(a,"/range/").concat(o);d.a.get(s).then((function(t){var a=[];t.data.forEach((function(e,t){a.push({row:"A"+(t+2),vigilante:e[0],nome:e[1],telefone1:"".concat(e[2]," ").concat(e[3]),agenteSaude:e[4],tentativas:e[5],atendimentosEfetuados:"".concat(+e[6],"/").concat(+e[5]+ +e[6]),escalaVulnerabilidade:e[7],escalaEpidemiologica:e[8],escalaRisco:e[9],dataUltimoAtendimento:"".concat(e[10]," ").concat(e[11]),horaUltimoAtendimento:e[11],sugestaoProximoAtendimento:e[12]})})),e.items=a,console.log(e.items)})).catch(f)}},mounted:function(){this.loadItems()}},Vt=Pt,Nt=Object(w["a"])(Vt,Ut,$t,!1,null,null,null),Tt=Nt.exports,Dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[e._v("foram encontrados "+e._s(e.items.length)+" registros")]),a("b-table",{attrs:{hover:"",items:e.items,fields:e.fields}})],1)},Rt=[],jt={name:"Vigilante4Page",data:function(){return{items:[],fields:[{key:"row",label:"row",sortable:!0},{key:"vigilante",label:"Vigilante",sortable:!0},{key:"nome",label:"Nome",sortable:!0},{key:"telefone1",label:"Telefones",sortable:!0},{key:"agenteSaude",label:"Agente de Saúde",sortable:!0},{key:"atendimentosEfetuados",label:"Atendimentos Efetuados",sortable:!0},{key:"escalaVulnerabilidade",label:"Escala Vulnerabilidade",sortable:!0},{key:"escalaEpidemiologica",label:"Escala Epidemiológica",sortable:!0},{key:"escalaRisco",label:"Escala Risco COVID-19",sortable:!0},{key:"dataUltimoAtendimento",label:"Último Atendimento",sortable:!0},{key:"sugestaoProximoAtendimento",label:"Sugestão próximo atendimento",sortable:!0}]}},methods:{loadItems:function(){var e=this;console.log("load items");var t="1tBlFtcTlo1xtq4lU1O2Yq94wYaFfyL9RboX6mWjKhh4",a="Vigilante 4",o="A2:M",s="".concat(u,"/docs/").concat(t,"/sheets/").concat(a,"/range/").concat(o);d.a.get(s).then((function(t){var a=[];t.data.forEach((function(e,t){a.push({row:"A"+(t+2),vigilante:e[0],nome:e[1],telefone1:"".concat(e[2]," ").concat(e[3]),agenteSaude:e[4],tentativas:e[5],atendimentosEfetuados:"".concat(+e[6],"/").concat(+e[5]+ +e[6]),escalaVulnerabilidade:e[7],escalaEpidemiologica:e[8],escalaRisco:e[9],dataUltimoAtendimento:"".concat(e[10]," ").concat(e[11]),horaUltimoAtendimento:e[11],sugestaoProximoAtendimento:e[12]})})),e.items=a,console.log(e.items)})).catch(f)}},mounted:function(){this.loadItems()}},qt=jt,Mt=Object(w["a"])(qt,Dt,Rt,!1,null,null,null),Bt=Mt.exports,Lt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[e._v("foram encontrados "+e._s(e.items.length)+" registros")]),a("b-table",{attrs:{hover:"",items:e.items,fields:e.fields}})],1)},Ft=[],Gt={name:"RespostasPage",data:function(){return{items:[],fields:[{key:"row",label:"row",sortable:!0},{key:"data",label:"data",sortable:!0},{key:"vigilante",label:"vigilante",sortable:!0},{key:"nome",label:"Nome",sortable:!0},{key:"atendeu",label:"Atendeu ao telefonema",sortable:!0},{key:"idade",label:"Idade",sortable:!0}]}},methods:{loadItems:function(){var e=this;console.log("load items");var t="1tBlFtcTlo1xtq4lU1O2Yq94wYaFfyL9RboX6mWjKhh4",a="Respostas",o="A2:AI",s="".concat(u,"/docs/").concat(t,"/sheets/").concat(a,"/range/").concat(o);d.a.get(s).then((function(t){var a=[];t.data.forEach((function(e,t){a.push({row:"A"+(t+2),data:e[0],vigilante:e[1],nome:e[2],atendeu:e[3],idade:e[4]})})),e.items=a})).catch(f)}},mounted:function(){this.loadItems()}},zt=Gt,Ht=Object(w["a"])(zt,Lt,Ft,!1,null,null,null),Kt=Ht.exports,Yt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[e._v("foram encontrados "+e._s(e.items.length)+" registros")]),a("b-table",{attrs:{hover:"",items:e.items,fields:e.fields}})],1)},Jt=[],Wt={name:"EscalasPage",data:function(){return{items:[],fields:[{key:"row",label:"row",sortable:!0},{key:"nome",label:"nome",sortable:!0},{key:"idade",label:"idade",sortable:!0},{key:"escalaVulnerabilidade",label:"Escala Vulnerabilidade",sortable:!0},{key:"escalaEpidemiologica",label:"Escala Epidemiologica",sortable:!0},{key:"escalaRisco",label:"Escala de Risco",sortable:!0},{key:"scoreOrdenacao",label:"Score de Ordenacao",sortable:!0},{key:"data",label:"data",sortable:!0}]}},methods:{loadItems:function(){var e=this;console.log("load items");var t="1tBlFtcTlo1xtq4lU1O2Yq94wYaFfyL9RboX6mWjKhh4",a="Escalas",o="A2:AI",s="".concat(u,"/docs/").concat(t,"/sheets/").concat(a,"/range/").concat(o);d.a.get(s).then((function(t){var a=[];t.data.forEach((function(e,t){a.push({row:"A"+(t+2),nome:e[0],idade:e[1],escalaVulnerabilidade:e[2],escalaEpidemiologica:e[3],escalaRisco:e[4],scoreOrdenacao:e[5],data:e[6]})})),e.items=a,console.log(e.items)})).catch(f)}},mounted:function(){this.loadItems()}},Xt=Wt,Qt=Object(w["a"])(Xt,Yt,Jt,!1,null,null,null),Zt=Qt.exports,ea=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[e._v("foram encontrados "+e._s(e.items.length)+" registros")]),a("b-table",{attrs:{hover:"",items:e.items,fields:e.fields}})],1)},ta=[],aa={name:"StatusAtendimentosPage",data:function(){return{items:[],fields:[{key:"row",label:"row",sortable:!0},{key:"vigilante",label:"Vigilante",sortable:!0},{key:"nome",label:"Nome",sortable:!0},{key:"agenteSaude",label:"Agente de Saúde",sortable:!0},{key:"atendimentosEfetuados",label:"Atendimentos Efetuados",sortable:!0},{key:"escalaVulnerabilidade",label:"Escala Vulnerabilidade",sortable:!0},{key:"escalaEpidemiologica",label:"Escala Epidemiológica",sortable:!0},{key:"escalaRisco",label:"Escala Risco COVID-19",sortable:!0},{key:"scoreOrdenacao",label:"scoreOrdenacao",sortable:!0},{key:"dataUltimoAtendimento",label:"Último Atendimento",sortable:!0},{key:"sugestaoProximoAtendimento",label:"Sugestão próximo atendimento",sortable:!0}]}},methods:{loadItems:function(){var e=this;console.log("load items");var t="1tBlFtcTlo1xtq4lU1O2Yq94wYaFfyL9RboX6mWjKhh4",a="Status Atendimentos",o="A2:AI",s="".concat(u,"/docs/").concat(t,"/sheets/").concat(a,"/range/").concat(o);d.a.get(s).then((function(t){var a=[];t.data.forEach((function(e,t){a.push({row:"A"+(t+2),vigilante:e[0],nome:e[1],telefone1:"".concat(e[2]," ").concat(e[3]),agenteSaude:e[4],tentativas:e[5],atendimentosEfetuados:"".concat(+e[6],"/").concat(+e[5]+ +e[6]),escalaVulnerabilidade:e[7],escalaEpidemiologica:e[8],escalaRisco:e[9],scoreOrdenacao:e[10],dataUltimoAtendimento:"".concat(e[11]," ").concat(e[12]),sugestaoProximoAtendimento:e[13]})})),e.items=a,console.log(e.items)})).catch(f)}},mounted:function(){this.loadItems()}},oa=aa,sa=Object(w["a"])(oa,ea,ta,!1,null,null,null),na=sa.exports,ia={name:"GerenciamentoSpreadsheet",components:{PageTitle:Ae,Vigilante1Page:At,Vigilante2Page:St,Vigilante3Page:Tt,Vigilante4Page:Bt,RespostasPage:Kt,EscalasPage:Zt,StatusAtendimentosPage:na}},ra=ia,da=Object(w["a"])(ra,bt,ht,!1,null,null,null),la=da.exports,ca=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.unidade?a("div",{staticClass:"listaIdosos"},[a("Breadcrumb",{attrs:{path:[{text:"Dashboard",url:"/"},{text:"Meus idosos"}]}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-9"},[a("h5",[e._v(e._s(e.unidade.nome))]),a("h1",[e._v("Meus Idosos")])]),a("div",{staticClass:"col-3 text-right"},[a("router-link",{staticClass:"btn btn-primary mt-4",attrs:{to:"/unidades/"+e.unidade._id+"/cadastrarIdoso",title:"Adicionar idoso"}},[e._v("Adicionar")])],1)]),a("b-tabs",{attrs:{"content-class":"mt-3"},on:{"activate-tab":e.tabActivated},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[a("b-tab",{attrs:{title:"Com escalas",lazy:""}},[a("TableIdosos",{attrs:{unidadeId:e.user.unidadeId,userId:e.user.id,filter:"com-escalas",orderBy:"VIGILANTE"==e.user.role?"proximo-atendimento":"score"}})],1),a("b-tab",{attrs:{title:"Sem escalas",lazy:""}},[a("TableIdosos",{attrs:{unidadeId:e.user.unidadeId,userId:e.user.id,filter:"sem-escalas",orderBy:"VIGILANTE"==e.user.role?"proximo-atendimento":"score"}})],1),a("b-tab",{attrs:{title:"Todos",lazy:""}},[a("TableIdosos",{attrs:{unidadeId:e.user.unidadeId,userId:e.user.id,filter:"all",orderBy:"VIGILANTE"==e.user.role?"proximo-atendimento":"score"}})],1)],1)],1):e._e()},ua=[],ma=(a("c740"),a("ac1f"),a("5319"),a("841c"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tableIdosos"},[a("b-row",{staticClass:"mb-3",attrs:{"align-h":"end","align-v":"end"}},[a("b-col",{staticClass:"text-right text-muted",attrs:{cols:"2"}},[e._v(" "+e._s(e.tableInfo.totalRows)+" resultados ")]),a("b-col",{attrs:{cols:"2"}},[e._v(" ordenar por "),a("b-form-select",{attrs:{size:"sm",options:e.sortOptions},on:{change:function(t){return e.loadIdosos(0)}},model:{value:e.order,callback:function(t){e.order=t},expression:"order"}})],1)],1),a("b-table",{attrs:{items:e.idosos,fields:e.fields,"primary-key":"_id",busy:e.carregando,"show-empty":""},scopedSlots:e._u([{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-primary my-2"},[a("b-spinner",{staticClass:"align-middle"}),a("strong",[e._v(" Carregando...")])],1)]},proxy:!0},{key:"empty",fn:function(){return[a("div",{staticClass:"text-center text-muted"},[e._v("Não há registros")])]},proxy:!0},{key:"cell(col-1)",fn:function(t){return[a("div",[a("router-link",{attrs:{to:"/unidades/"+t.item.unidadeId+"/idosos/"+t.item._id}},[e._v(e._s(t.item.nome))])],1),t.item.estatisticas&&t.item.estatisticas.ultimaEscala?a("div",{staticClass:"badges"},[t.item.estatisticas.ultimaEscala.escalas.vulnerabilidade?a("popper",{attrs:{trigger:"hover",options:{placement:"top"}}},[a("div",{staticClass:"popper"},[e._v(" Escala de Vulnerabilidade ")]),a("span",{attrs:{slot:"reference"},slot:"reference"},[a("Badge",{attrs:{value:t.item.estatisticas.ultimaEscala.escalas.vulnerabilidade}})],1)]):e._e(),t.item.estatisticas.ultimaEscala.escalas.epidemiologica?a("popper",{attrs:{trigger:"hover",options:{placement:"top"}}},[a("div",{staticClass:"popper"},[e._v(" Escala Epidemiológica ")]),a("span",{attrs:{slot:"reference"},slot:"reference"},[a("Badge",{attrs:{value:t.item.estatisticas.ultimaEscala.escalas.epidemiologica}})],1)]):e._e(),t.item.estatisticas.ultimaEscala.escalas.riscoContagio?a("popper",{attrs:{trigger:"hover",options:{placement:"top"}}},[a("div",{staticClass:"popper"},[e._v(" Risco de Contágio por COVID-19 ")]),a("span",{attrs:{slot:"reference"},slot:"reference"},[a("Badge",{attrs:{value:t.item.estatisticas.ultimaEscala.escalas.riscoContagio}})],1)]):e._e()],1):e._e()]}},{key:"cell(col-2)",fn:function(t){return[a("div",{staticClass:"group-col"},[a("section",[a("div",{staticClass:"statusAtendimentos"},[a("span",[a("popper",{attrs:{trigger:"hover",options:{placement:"top",modifiers:{offset:{offset:"0,10px"}}}}},[a("div",{staticClass:"popper"},[e._v(" Atendimentos efetuados / total de tentativas ")]),a("span",{attrs:{slot:"reference"},slot:"reference"},[a("font-awesome-icon",{attrs:{icon:["fas","headset"]}}),e._v(" "+e._s(t.item.estatisticas?t.item.estatisticas.qtdAtendimentosEfetuados:0)+"/"+e._s(t.item.estatisticas?t.item.estatisticas.qtdTotal:0)+" ")],1)])],1),t.item.estatisticas&&t.item.estatisticas.ultimoAtendimento?a("span",{staticClass:"statusUltimoAtendimento",class:{atendido:t.item.estatisticas.ultimoAtendimento.atendeu}},[a("popper",{attrs:{trigger:"hover",options:{placement:"top",modifiers:{offset:{offset:"0,10px"}}}}},[a("div",{staticClass:"popper"},[e._v(" Último atendimento: "),t.item.estatisticas.ultimoAtendimento.atendeu?a("span",[e._v("Ligação atendida")]):e._e(),t.item.estatisticas.ultimoAtendimento.atendeu?e._e():a("span",[e._v("Não atendeu a ligação")])]),a("span",{attrs:{slot:"reference"},slot:"reference"},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.item.estatisticas.ultimoAtendimento.atendeu,expression:"data.item.estatisticas.ultimoAtendimento.atendeu"}]},[a("font-awesome-icon",{attrs:{icon:["far","check-circle"]}})],1),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.item.estatisticas.ultimoAtendimento.atendeu,expression:"!data.item.estatisticas.ultimoAtendimento.atendeu"}]},[a("font-awesome-icon",{attrs:{icon:["far","times-circle"]}})],1),e._v(" "+e._s(e.formatDate(t.item.estatisticas.ultimoAtendimento.timestamp))+" ")])])],1):e._e(),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.item.estatisticas||!t.item.estatisticas.ultimoAtendimento,expression:"!data.item.estatisticas || !data.item.estatisticas.ultimoAtendimento"}],staticClass:"statusUltimoAtendimento atencao"},[a("popper",{attrs:{trigger:"hover",options:{placement:"top",modifiers:{offset:{offset:"0,10px"}}}}},[a("div",{staticClass:"popper"},[e._v(" Último atendimento: não há registros ")]),a("span",{attrs:{slot:"reference"},slot:"reference"},[a("font-awesome-icon",{attrs:{icon:["fas","exclamation-circle"]}}),e._v(" pendente ")],1)])],1),t.item.estatisticas&&t.item.estatisticas.ultimaEscala&&t.item.estatisticas.ultimaEscala.escalas.dataProximoAtendimento?a("span",{staticClass:"dataProximoAtendimento"},[a("popper",{attrs:{trigger:"hover",options:{placement:"top",modifiers:{offset:{offset:"0,10px"}}}}},[a("div",{staticClass:"popper"},[e._v(" Sugestão de próximo atendimento ")]),a("span",{attrs:{slot:"reference"},slot:"reference"},[a("font-awesome-icon",{attrs:{icon:["far","clock"]}}),e._v(" "+e._s(e.formatDate(t.item.estatisticas.ultimaEscala.escalas.dataProximoAtendimento))+" ")],1)])],1):a("span",[a("popper",{attrs:{trigger:"hover",options:{placement:"top",modifiers:{offset:{offset:"0,10px"}}}}},[a("div",{staticClass:"popper"},[e._v(" Sugestão de próximo atendimento ")]),a("span",{attrs:{slot:"reference"},slot:"reference"},[a("font-awesome-icon",{attrs:{icon:["far","clock"]}}),e._v(" Não definido ")],1)])],1)]),a("div",[e._v(" Telefones: "+e._s(t.item.telefone1)+" "+e._s(t.item.telefone2)+" ")])]),a("div",{staticClass:"table-actions ml-2"},[a("a",{staticClass:"btn btn-light",attrs:{target:"_blank",title:"Novo atendimento",href:e.novoAtendimentoURL(t.item,e.user)}},[a("font-awesome-icon",{attrs:{icon:["fas","comment-medical"]}})],1)]),"ADMINISTRADOR"==e.user.role||"PRECEPTOR"==e.user.role?a("div",{staticClass:"table-actions ml-2"},[a("b-dropdown",{attrs:{right:"","no-caret":"",variant:"light",title:"Opções"},scopedSlots:e._u([{key:"button-content",fn:function(){return[a("font-awesome-icon",{attrs:{icon:["fas","ellipsis-v"]}})]},proxy:!0}],null,!0)},[a("b-dropdown-item",{attrs:{href:"/unidades/"+e.unidadeId+"/cadastrarIdoso?id="+t.item._id}},[e._v("Editar")]),"ADMINISTRADOR"==e.user.role?a("b-dropdown-item",{on:{click:function(a){return e.deleteIdoso(t.item._id)}}},[e._v("Excluir")]):e._e()],1)],1):e._e()])]}}])}),a("div",{staticClass:"pagination"},[a("b-button-group",[a("button",{staticClass:"prev btn btn-light",attrs:{disabled:0==e.tableInfo.currentPage},on:{click:function(t){return e.loadIdosos(e.tableInfo.currentPage-1)}}},[e._v("<")]),e._l(e.tablePagination,(function(t){return a("button",{key:t,staticClass:"btn btn-light",class:{current:t==e.tableInfo.currentPage},on:{click:function(a){return e.loadIdosos(t)}}},[e._v(e._s(t+1))])})),a("button",{staticClass:"next btn btn-light",attrs:{disabled:e.tableInfo.currentPage+1>=Math.ceil(e.tableInfo.totalRows/e.tableInfo.rowsPerPage)},on:{click:function(t){return e.loadIdosos(e.tableInfo.currentPage+1)}}},[e._v(">")])],2),a("span",{staticClass:"text-muted ml-3 mt-1"},[e._v("("+e._s(Math.ceil(e.tableInfo.totalRows/e.tableInfo.rowsPerPage))+" páginas)")])],1)],1)}),fa=[],pa=(a("4de4"),a("7db0"),a("d3b7"),a("25f0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"badge",class:e.color},[e._v(" "+e._s(e.value)+" ")])}),va=[],ba={name:"Badge",props:["value"],computed:{color:function(){switch(this.value){case"baixo":case"Baixo":return"green";case"médio":case"Médio":return"yellow";case"alto":case"Alto":case"Elevado":return"red";case"0 - Sem vulnerabilidades":case"O - Sem Vulnerabilidade":return"blue";case"A - vulnerabilidade financeira":case"A - Vulnerabilidade financeira":case"A - Vulnerabilidade Financeira":case"B - vulnerabilidade alimentar":case"B - Vulnerabilidade Alimentar":case"B - Vulnerabilidade alimentar":return"yellow";case"C - Situação de violência":case"C - situação de violência":return"red";case"Ia - Assintomático, mora com assintomáticos":case"Ib - Assintomático, mas vive sozinho":return"blue";case"IIa - Assintomático, mas sai de casa":case"IIb - Assintomático, mas recebe visitas ou domiciliares saem":case"IIb - Assintomático, mas recebe visita ou domiciliares saem":case"IIIa - Assintomático, mas com comorbidades":return"green";case"IIIb - Assintomático, mas tem contato com sintomáticos ou confirmados":case"IVa - Assintomático, mas sem medicações":return"yellow";case"IVb - Idoso sintomático":return"red";case"0 - Não atendeu à ligação":default:return"gray"}}}},ha=ba,ga=(a("d49b"),Object(w["a"])(ha,pa,va,!1,null,null,null)),_a=ga.exports,Ia=a("526e"),xa=a.n(Ia),ka=(a("a101"),{name:"TableIdosos",props:["unidadeId","userId","filter","orderBy"],components:{Badge:_a,popper:xa.a},computed:Object(h["b"])(["pageParamsMap","user"]),data:function(){return{carregando:!0,unidade:null,order:this.orderBy,sortOptions:[{value:"nome",text:"Nome"},{value:"proximo-atendimento",text:"Próximo atendimento"},{value:"score",text:"Score"},{value:"ultimo-atendimento",text:"Último atendimento"}],tableInfo:{totalRows:0,currentPage:0,rowsPerPage:25},tablePagination:[],idosos:[],fields:[{key:"estatisticas.ultimaEscala.escalas.scoreOrdenacao",label:"Score"},{key:"col-1",label:"Idoso"},{key:"col-2",label:" "}]}},methods:{novoAtendimentoURL:p,formatDate:b,loadIdosos:function(e){var t,a=this;this.carregando=!0,this.$store.commit("setPageParamsMap",{userId:this.userId,filter:this.filter,order:this.order,page:e,rowsPerPage:this.tableInfo.rowsPerPage}),t="".concat(u,"/v2/unidades/").concat(this.unidadeId,"/usuarios/").concat(this.userId,"/idosos?filter=").concat(this.filter,"&sort=").concat(this.order,"&page=").concat(e,"&rowsPerPage=").concat(this.tableInfo.rowsPerPage),console.log(t),d.a.get(t).then((function(e){a.tableInfo=e.data.info?e.data.info:{totalRows:0,currentPage:0,rowsPerPage:25},a.idosos=e.data.data,a.calcPagination(),a.carregando=!1,console.log(e.data)})).catch((function(e){console.error(e),f(e)}))},calcPagination:function(){this.tablePagination=[];var e=Math.ceil(this.tableInfo.totalRows/this.tableInfo.rowsPerPage);if(e>=10)if(this.tableInfo.currentPage<5)for(var t=0;t<10;t++)this.tablePagination.push(t);else if(e-this.tableInfo.currentPage>=5&&e-this.tableInfo.currentPage>5)for(var a=this.tableInfo.currentPage-5;a<this.tableInfo.currentPage+5;a++)this.tablePagination.push(a);else for(var o=e-10;o<e;o++)this.tablePagination.push(o);else for(var s=0;s<e;s++)this.tablePagination.push(s)},deleteIdoso:function(e){var t=this;this.$bvModal.msgBoxConfirm("Deseja realmente excluir o idoso? Todos os dados serão perdidos!",{okVariant:"danger",okTitle:"excluir",cancelTitle:"cancelar"}).then((function(a){if(console.log(a),!0===a){var o="".concat(u,"/v2/idosos/").concat(e);console.log(o),d.a.delete(o).then((function(e){console.log(e),t.$toasted.global.defaultSuccess({msg:"Idoso removido com sucesso"}),t.loadIdosos()})).catch(f)}})).catch((function(e){console.error(e.toString())}))}},mounted:function(){var e=this,t=0,a=this.$store.state.pageParamsMap.get(this.userId);if(a){var o=a.find((function(t){return t.filter==e.filter}));o&&(this.order=o.order,this.tableInfo.rowsPerPage=o.rowsPerPage,this.tableInfo.currentPage=o.page,t=o.page)}this.loadIdosos(t)}}),Aa=ka,ya=(a("e526"),Object(w["a"])(Aa,ma,fa,!1,null,null,null)),Ca=ya.exports,wa={name:"VigilanteHome",components:{TableIdosos:Ca,Breadcrumb:Se},computed:Object(h["b"])(["user","syncStatus"]),data:function(){return{carregando:!0,unidade:null,tabIndex:0,tabs:["com-escalas","sem-escalas","todos"]}},methods:{loadUnidade:function(){var e=this,t="".concat(u,"/v2/unidades/").concat(this.user.unidadeId);console.log(t),d.a.get(t).then((function(t){e.unidade=t.data,console.log(e.unidade)})).catch(f)},formatDate:function(e){return new Date(e).toLocaleString()},manualSync:function(){console.log("emit softSyncEvent"),"VIGILANTE"===this.user.role?this.$socket.emit("softSyncEvent",{idUnidade:this.user.unidadeId,nomeVigilante:this.user.name}):this.$socket.emit("softSyncEvent",{idUnidade:this.user.unidadeId})},tabActivated:function(e,t,a){console.log("tab activated",e,t,a),console.log(location.search);var o=this.$route.params;o.tab=this.tabs[e],this.$router.replace({name:this.$route.name,params:o})}},mounted:function(){var e=this;this.tabIndex=this.tabs.findIndex((function(t){return t===e.$route.params.tab})),this.loadUnidade()}},Ea=wa,Oa=(a("905f"),Object(w["a"])(Ea,ca,ua,!1,null,null,null)),Sa=Oa.exports,Ua=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"unidades"},[a("Breadcrumb",{attrs:{path:[{text:"Dashboard",url:"/"},{text:"Unidades"}]}}),a("div",{staticClass:"row mb-3"},[e._m(0),a("div",{staticClass:"col text-right"},[a("b-dropdown",{staticClass:"pull-right",attrs:{id:"dropdown-1",text:"Adicionar",variant:"primary",right:""}},[a("b-dropdown-item",{attrs:{href:"/adicionarUnidade"}},[a("strong",[e._v("Adicionar unidade")]),a("p",[e._v("Crie uma nova unidade do zero")])]),a("b-dropdown-item",{attrs:{href:"/importarUnidade"}},[a("strong",[e._v("Importar unidade")]),a("p",[e._v("Importe uma unidade a partir de uma planilha do google sheets")])])],1)],1)]),a("ul",{staticClass:"grid-list row"},e._l(e.unidades,(function(t){return a("li",{key:t._id,staticClass:"col-sm-6 col-md-4 col-lg-3"},[a("router-link",{staticClass:"item",attrs:{to:"/unidades/"+t._id,title:"clique para ver detalhes"}},[a("h2",[e._v(e._s(t.nome))]),a("p",[e._v("Distrito "+e._s(t.distrito))])])],1)})),0)],1)},$a=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col"},[a("h1",[e._v("Unidades")])])}],Pa={name:"Unidades",components:{Breadcrumb:Se},data:function(){return{unidades:[]}},methods:{loadUnidades:function(){var e=this,t="".concat(u,"/v2/unidades");console.log(t),d.a.get(t).then((function(t){e.unidades=t.data,console.log(e.unidades)})).catch(f)},formatDate:function(e){return new Date(e).toLocaleString()}},mounted:function(){this.loadUnidades()}},Va=Pa,Na=(a("6f17"),Object(w["a"])(Va,Ua,$a,!1,null,null,null)),Ta=Na.exports,Da=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.unidade?a("div",{staticClass:"unidades"},[a("Breadcrumb",{attrs:{path:[{text:"Dashboard",url:"/"},{text:"Unidades",url:"/unidades"},{text:e.unidade.nome}]}}),a("header",{staticClass:"header-page row justify-content-between"},[a("div",{staticClass:"col-10"},[a("h1",[e._v(e._s(e.unidade.nome))]),a("p",[e._v("Distrito "+e._s(e.unidade.distrito))])]),a("div",{staticClass:"col-2 text-right"},[a("b-dropdown",{attrs:{right:"","no-caret":"",variant:"light",title:"Opções"},scopedSlots:e._u([{key:"button-content",fn:function(){return[a("font-awesome-icon",{attrs:{icon:["fas","ellipsis-v"]}})]},proxy:!0}],null,!1,2044338290)},[a("b-dropdown-item",{attrs:{href:"/adicionarUnidade?id="+e.unidade._id}},[e._v("Editar")]),a("b-dropdown-item",{on:{click:function(t){return e.confirmDeletion(e.unidade._id)}}},[e._v("Excluir")]),a("b-dropdown-item",{attrs:{disabled:!e.unidade.idPlanilhaGerenciamento||"LOADING"===e.syncStatus.status},on:{click:e.importFromPlanilhaUnidade}},[e._v("Reimportar de planilhas")])],1)],1),e.loading?a("div",[e._v("carregando...")]):e._e()]),a("div",{staticClass:"container"},[a("div",{staticClass:"card mb-4"},[a("div",{staticClass:"card-body"},[a("span",{staticClass:"display-4"},[e._v(e._s(e.qtdIdosos))]),e._v(" "),a("strong",[e._v("Idosos")]),a("router-link",{staticClass:"btn btn-primary float-right mt-3",attrs:{to:"/unidades/"+e.unidade._id+"/usuarios/"+e.user.id+"/idosos/all"}},[e._v("Ver todos")])],1)]),a("div",{staticClass:"card mb-4"},[a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[e._v(" Usuários "),a("router-link",{staticClass:"btn btn-primary float-right mb-3",attrs:{to:"/unidades/"+e.unidade._id+"/addUsuario"}},[e._v("Convidar")])],1),a("h6",{staticClass:"card-subtitle"},[e._v("Ativos")]),a("b-table",{attrs:{items:e.usuariosAtivos,fields:e.fieldsUsuarios},scopedSlots:e._u([{key:"cell(link)",fn:function(t){return[a("router-link",{attrs:{to:"/unidades/"+e.unidade._id+"/usuarios/"+t.item._id+"/idosos/com-escalas",title:"Clique para ver os idosos do usuário"}},[e._v(e._s(t.item.name))]),a("div",{staticClass:"text-muted"},[e._v(" "+e._s(t.item.role)+" "),"VIGILANTE"===t.item.role?a("span",[e._v(" • "),a("CounterIdosos",{staticClass:"small",attrs:{idUnidade:t.item.unidadeId,idVigilante:t.item._id}})],1):e._e()])]}},{key:"cell(status)",fn:function(t){return["INCOMPLETO"==t.item.status?a("span",[a("b-form-checkbox",{staticClass:"d-inline-block",attrs:{value:"ATIVO","unchecked-value":"INATIVO",name:"check-button",switch:"",disabled:!0},model:{value:t.item.status,callback:function(a){e.$set(t.item,"status",a)},expression:"data.item.status"}}),e._v(" INCOMPLETO ")],1):"CONVIDADO"==t.item.status?a("span",[a("b-form-checkbox",{staticClass:"d-inline-block",attrs:{value:"ATIVO","unchecked-value":"INATIVO",name:"check-button",switch:"",disabled:!0},model:{value:t.item.status,callback:function(a){e.$set(t.item,"status",a)},expression:"data.item.status"}}),e._v(" CONVITE ENVIADO ")],1):a("span",[a("b-form-checkbox",{staticClass:"d-inline-block",attrs:{value:"ATIVO","unchecked-value":"INATIVO",name:"check-button",switch:"",disabled:t.item._id==e.user.id},on:{change:function(a){return e.toggleAtivo(t.item)}},model:{value:t.item.status,callback:function(a){e.$set(t.item,"status",a)},expression:"data.item.status"}}),e._v(" "+e._s(t.item.status)+" ")],1)]}},{key:"cell(acoes)",fn:function(t){return[a("b-dropdown",{attrs:{right:"","no-caret":"",variant:"light",title:"Opções"},scopedSlots:e._u([{key:"button-content",fn:function(){return[a("font-awesome-icon",{attrs:{icon:["fas","ellipsis-v"]}})]},proxy:!0}],null,!0)},["INCOMPLETO"==t.item.status?a("b-dropdown-item",{on:{click:function(a){return e.openModalCompletarCadastroUsuario(t.item)}}},[e._v("Convidar")]):"CONVIDADO"==t.item.status?a("b-dropdown-item",{on:{click:function(a){return e.resendInvite(t.item._id)}}},[e._v("Reenviar convite")]):e._e(),a("b-dropdown-item",{attrs:{disabled:"VIGILANTE"!==t.item.role,href:"/unidades/"+t.item.unidadeId+"/usuarios/"+t.item._id+"/transferirIdosos"}},[e._v("Transferir idosos")])],1)]}}],null,!1,1982107723)}),a("h6",{staticClass:"card-subtitle"},[e._v("Inativos")]),a("b-table",{attrs:{items:e.usuariosInativos,fields:e.fieldsUsuarios},scopedSlots:e._u([{key:"cell(link)",fn:function(t){return[a("router-link",{attrs:{to:"/unidades/"+e.unidade._id+"/usuarios/"+t.item._id+"/idosos/com-escalas",title:"Clique para ver os idosos do usuário"}},[e._v(e._s(t.item.name))]),a("div",{staticClass:"text-muted"},[e._v(" "+e._s(t.item.role)+" "),"VIGILANTE"===t.item.role?a("span",[e._v(" • "),a("CounterIdosos",{staticClass:"small",attrs:{idUnidade:t.item.unidadeId,idVigilante:t.item._id}})],1):e._e()])]}},{key:"cell(status)",fn:function(t){return["INCOMPLETO"==t.item.status?a("span",[a("b-form-checkbox",{staticClass:"d-inline-block",attrs:{value:"ATIVO","unchecked-value":"INATIVO",name:"check-button",switch:"",disabled:!0},model:{value:t.item.status,callback:function(a){e.$set(t.item,"status",a)},expression:"data.item.status"}}),e._v(" INCOMPLETO ")],1):"CONVIDADO"==t.item.status?a("span",[a("b-form-checkbox",{staticClass:"d-inline-block",attrs:{value:"ATIVO","unchecked-value":"INATIVO",name:"check-button",switch:"",disabled:!0},model:{value:t.item.status,callback:function(a){e.$set(t.item,"status",a)},expression:"data.item.status"}}),e._v(" CONVITE ENVIADO ")],1):a("span",[a("b-form-checkbox",{staticClass:"d-inline-block",attrs:{value:"ATIVO","unchecked-value":"INATIVO",name:"check-button",switch:"",disabled:t.item._id==e.user.id},on:{change:function(a){return e.toggleAtivo(t.item)}},model:{value:t.item.status,callback:function(a){e.$set(t.item,"status",a)},expression:"data.item.status"}}),e._v(" "+e._s(t.item.status)+" ")],1)]}},{key:"cell(acoes)",fn:function(t){return[a("b-dropdown",{attrs:{right:"","no-caret":"",variant:"light",title:"Opções"},scopedSlots:e._u([{key:"button-content",fn:function(){return[a("font-awesome-icon",{attrs:{icon:["fas","ellipsis-v"]}})]},proxy:!0}],null,!0)},["INCOMPLETO"==t.item.status?a("b-dropdown-item",{on:{click:function(a){return e.openModalCompletarCadastroUsuario(t.item)}}},[e._v("Convidar")]):"CONVIDADO"==t.item.status?a("b-dropdown-item",{on:{click:function(a){return e.resendInvite(t.item._id)}}},[e._v("Reenviar convite")]):e._e(),a("b-dropdown-item",{attrs:{disabled:"VIGILANTE"!==t.item.role,href:"/unidades/"+t.item.unidadeId+"/usuarios/"+t.item._id+"/transferirIdosos"}},[e._v("Transferir idosos")])],1)]}}],null,!1,1982107723)})],1)])]),a("b-modal",{attrs:{id:"modal-completar-cadastro-usuario",title:"Completar cadastro"},on:{hidden:e.modalCompletarCadastroUsuarioReset,ok:e.modalCompletarCadastroUsuarioHandleOk}},[a("form",{ref:"form",on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.modalCompletarCadastroUsuarioHandleSubmit(t)}}},[a("b-alert",{attrs:{show:"",variant:"info"}},[e._v("Um email será enviado para que o usuário possa completar o cadastro e ter acesso ao sistema")]),a("b-form-group",{attrs:{label:"Nome","label-for":"nome-input"}},[a("b-form-input",{attrs:{id:"nome-input",disabled:""},model:{value:e.completarCadastroUsuario.nome,callback:function(t){e.$set(e.completarCadastroUsuario,"nome",t)},expression:"completarCadastroUsuario.nome"}})],1),a("b-form-group",{attrs:{label:"E-mail","label-for":"email-input",state:e.completarCadastroUsuario.emailState,"invalid-feedback":e.completarCadastroUsuario.emailInvalidFeedback||"Email inválido"}},[a("b-form-input",{attrs:{id:"email-input",type:"email",required:"",state:e.completarCadastroUsuario.emailState},model:{value:e.completarCadastroUsuario.email,callback:function(t){e.$set(e.completarCadastroUsuario,"email",t)},expression:"completarCadastroUsuario.email"}})],1)],1)])],1):e._e()},Ra=[],ja=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"counterIdosos"},[e._v(" "+e._s(e.qtdIdosos)+" idosos ")])},qa=[],Ma={name:"CounterIdosos",props:["idUnidade","idVigilante"],computed:Object(h["b"])(["user"]),data:function(){return{qtdIdosos:0}},methods:{countIdosos:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="".concat(u,"/v2/unidades/").concat(e.idUnidade,"/vigilantes/").concat(e.idVigilante,"/idosos/count"),console.log(a),t.prev=2,t.next=5,d.a.get(a);case 5:o=t.sent,e.qtdIdosos=o.data?o.data.total:0,t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](2),e.qtdIdosos="?",console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[2,9]])})))()}},mounted:function(){this.countIdosos()}},Ba=Ma,La=(a("62a9"),Object(w["a"])(Ba,ja,qa,!1,null,null,null)),Fa=La.exports,Ga={name:"Unidade",components:{Breadcrumb:Se,CounterIdosos:Fa},data:function(){return{unidade:null,loading:!1,usuarios:[],usuariosAtivos:[],usuariosInativos:[],fieldsUsuarios:[{key:"link",label:"nome"},{key:"email",label:"email"},{key:"status",label:"status"},{key:"acoes",label:"ações"}],completarCadastroUsuario:{nome:"",id:"",email:"",emailState:null,emailInvalidFeedback:""},qtdIdosos:0}},computed:Object(h["b"])(["syncStatus","user"]),methods:{loadUnidade:function(){var e=this,t="".concat(u,"/v2/unidades/").concat(this.$route.params.id);console.log(t),d.a.get(t).then((function(t){e.unidade=t.data,console.log(e.unidade),e.countIdososByUnidade()})).catch(f)},countIdososByUnidade:function(){var e=this,t="".concat(u,"/v2/unidades/").concat(this.$route.params.id,"/idosos/count");console.log(t),d.a.get(t).then((function(t){e.qtdIdosos=t.data})).catch(f)},loadUsuarios:function(){var e=this,t="".concat(u,"/v2/unidades/").concat(this.$route.params.id,"/usuarios");console.log(t),d.a.get(t).then((function(t){e.usuarios=t.data,e.usuariosAtivos=t.data.filter((function(e){return"ATIVO"===e.status})),e.usuariosInativos=t.data.filter((function(e){return"ATIVO"!=e.status})),console.log(e.usuarios)})).catch(f)},formatDate:function(e){return new Date(e).toLocaleString()},toggleSync:function(e){var t=this;this.loading=!0,this.$store.commit("setIsLoadingApp",!0);var a="".concat(u,"/unidades/").concat(this.$route.params.id,"/autosync/").concat(e);console.log(a),d.a.get(a).then((function(e){console.log(e),t.$router.go()})).catch((function(e){console.log(e),t.loading=!1,t.$store.commit("setIsLoadingApp",!1),f(e)}))},importFromPlanilhaUnidade:function(){console.log("emit importUnidadeEvent"),this.$socket.emit("importUnidadeEvent",{idUnidade:this.unidade._id})},manualReset:function(){console.log("emit resetEvent"),this.$socket.emit("resetEvent",{idUnidade:this.unidade._id})},resendInvite:function(e){var t=this,a="".concat(u,"/v2/usuarios/resendInvitation/").concat(e);console.log(a),d.a.post(a).then((function(e){console.log(e),t.$toasted.global.defaultSuccess({msg:e.data})})).catch(f)},modalCompletarCadastroUsuarioReset:function(){this.completarCadastroUsuario.id="",this.completarCadastroUsuario.nome="",this.completarCadastroUsuario.email="",this.completarCadastroUsuario.emailState=null},openModalCompletarCadastroUsuario:function(e){this.completarCadastroUsuario.id=e._id,this.completarCadastroUsuario.nome=e.name,this.completarCadastroUsuario.email=e.email,this.$bvModal.show("modal-completar-cadastro-usuario")},modalCompletarCadastroUsuarioHandleSubmit:function(){var e=this;if(this.completarCadastroUsuario.emailState=this.$refs.form.checkValidity(),this.completarCadastroUsuario.emailState){var t="".concat(u,"/v2/usuarios/").concat(this.completarCadastroUsuario.id,"/completar");console.log(t),d.a.post(t,{email:this.completarCadastroUsuario.email}).then((function(t){e.$toasted.global.defaultSuccess({msg:t.data}),e.loadUsuarios(),e.$nextTick((function(){e.$bvModal.hide("modal-completar-cadastro-usuario")}))})).catch((function(t){t&&t.response&&t.response.data?(e.completarCadastroUsuario.emailState=!1,e.completarCadastroUsuario.emailInvalidFeedback=t.response.data):f(t)}))}},modalCompletarCadastroUsuarioHandleOk:function(e){e.preventDefault(),this.modalCompletarCadastroUsuarioHandleSubmit()},toggleAtivo:function(e){var t=this,a="".concat(u,"/v2/usuarios/").concat(e._id,"/status/").concat("ATIVO"==e.status?"INATIVO":"INATIVO"==e.status?"ATIVO":e.status);console.log(a),d.a.post(a).then((function(e){t.$toasted.global.defaultSuccess({msg:e.data})})).catch((function(t){e.status="ATIVO"==e.status?"INATIVO":"INATIVO"==e.status?"ATIVO":e.status,f(t)}))},deleteUsuario:function(e){var t=this;this.$bvModal.msgBoxConfirm("Deseja realmente excluir o usuário? Todos os dados serão perdidos!",{okVariant:"danger",okTitle:"excluir",cancelTitle:"cancelar"}).then((function(a){if(console.log(a),!0===a){var o="".concat(u,"/v2/usuarios/").concat(e);console.log(o),d.a.delete(o).then((function(e){console.log(e),t.$toasted.global.defaultSuccess({msg:"Usuário removido com sucesso"}),t.loadUsuarios()})).catch(f)}})).catch((function(e){console.error(e.toString())}))},confirmDeletion:function(e){var t=this;this.$bvModal.msgBoxConfirm("Deseja realmente excluir a unidade? Todos os dados serão perdidos!",{okVariant:"danger",okTitle:"excluir",cancelTitle:"cancelar"}).then((function(a){if(console.log(a),!0===a){var o="".concat(u,"/v2/unidades/").concat(e);console.log(o),d.a.delete(o).then((function(e){console.log(e),t.$router.push({name:"unidades"}),t.$toasted.global.defaultSuccess({msg:"Unidade removida com sucesso"})})).catch(f)}})).catch((function(e){console.error(e.toString())}))}},sockets:{connect:function(){console.log("socket connected")}},mounted:function(){this.loadUnidade(),this.loadUsuarios()}},za=Ga,Ha=(a("6e60"),Object(w["a"])(za,Da,Ra,!1,null,null,null)),Ka=Ha.exports,Ya=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"adicionarUnidade"},[a("Breadcrumb",{attrs:{path:[{text:"Dashboard",url:"/"},{text:"Unidades",url:"/unidades"},{text:"Adicionar Unidade"}]}}),e.$route.query.id?a("h1",[e._v("Editar Unidade")]):a("h1",[e._v("Adicionar Unidade")]),a("b-form",{on:{submit:e.onSubmit}},[a("b-form-group",{attrs:{id:"input-group-nome",label:"Nome:","label-for":"nome"}},[a("b-form-input",{attrs:{id:"nome",type:"text",required:"",placeholder:"Nome da unidade"},model:{value:e.form.nome,callback:function(t){e.$set(e.form,"nome",t)},expression:"form.nome"}})],1),a("b-form-group",{attrs:{id:"input-group-distrito",label:"Distrito:","label-for":"distrito"}},[a("b-form-select",{attrs:{id:"distrito",options:e.distritos,required:""},model:{value:e.form.distrito,callback:function(t){e.$set(e.form,"distrito",t)},expression:"form.distrito"}})],1),a("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Salvar")])],1)],1)},Ja=[],Wa={name:"AdicionarUnidade",components:{Breadcrumb:Se},data:function(){return{form:{nome:"",distrito:null,status:"ATIVO",_isDeleted:!1},distritos:[{text:"Selecione...",value:null},"Norte I","Norte II","Sul","Leste","Oeste"]}},methods:{onSubmit:function(e){var t=this;e.preventDefault(),console.log(JSON.stringify(this.form));var a="".concat(u,"/v2/unidades");console.log(a),d.a.post(a,this.form).then((function(e){t.$router.push({name:"unidade",params:{id:e.data}}),t.$toasted.global.defaultSuccess()})).catch(f)}},mounted:function(){var e=this;if(this.$route.query.id){var t="".concat(u,"/v2/unidades/").concat(this.$route.query.id);d.a.get(t).then((function(t){e.form=t.data})).catch(f)}}},Xa=Wa,Qa=Object(w["a"])(Xa,Ya,Ja,!1,null,null,null),Za=Qa.exports,eo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"adicionarUnidade"},["LOADING"===e.syncStatus.status?a("section",{staticClass:"wait-page loading"},[a("font-awesome-icon",{attrs:{icon:["fas","sync"],size:"6x",spin:""}}),a("h1",{staticClass:"mt-5"},[e._v("Importando dados")]),a("h6",{staticClass:"text-muted"},[e._v("Isso vai demorar um pouco...")])],1):"SUCCESS"===e.syncStatus.status?a("section",{staticClass:"wait-page success"},[a("font-awesome-icon",{attrs:{icon:["far","check-circle"],size:"6x"}}),a("h1",{staticClass:"mt-5"},[e._v("Importação finalizada!")]),a("h6",{staticClass:"text-muted"},[e._v("Alguns registros podem não ter sido importados corretamente.")]),a("h6",{staticClass:"text-muted"},[e._v("Confira detalhes no relatório de falhas enviado por e-mail.")]),a("router-link",{staticClass:"btn btn-success mt-3",attrs:{to:"/unidades/"+e.unidadeId}},[e._v("acessar unidade")])],1):a("section",[a("Breadcrumb",{attrs:{path:[{text:"Dashboard",url:"/"},{text:"Unidades",url:"/unidades"},{text:"Importar unidade"}]}}),a("h1",[e._v("Importar unidade")]),a("b-alert",{attrs:{show:"",variant:"warning"}},[a("h4",{staticClass:"alert-heading"},[e._v("Atenção")]),e._v(" Antes de tudo, você deve compartilhar as planilhas com o email "),a("code",[e._v("autobot@frente-prevencao-covid-19-rn.iam.gserviceaccount.com")]),e._v(" para que a sincronização dos dados possa ser efetuada. ")]),a("b-form",{on:{submit:e.onSubmit}},[a("b-form-group",{attrs:{id:"input-group-nome",label:"Nome:","label-for":"nome"}},[a("b-form-input",{attrs:{id:"nome",type:"text",required:"",placeholder:"Nome da unidade"},model:{value:e.form.nome,callback:function(t){e.$set(e.form,"nome",t)},expression:"form.nome"}})],1),a("b-form-group",{attrs:{id:"input-group-distrito",label:"Distrito:","label-for":"distrito"}},[a("b-form-select",{attrs:{id:"distrito",options:e.distritos,required:""},model:{value:e.form.distrito,callback:function(t){e.$set(e.form,"distrito",t)},expression:"form.distrito"}})],1),a("b-form-group",{attrs:{id:"input-group-planilhaIdosos",label:"Planilha de idosos:","label-for":"planilhaIdosos"}},[a("b-form-input",{attrs:{id:"planilhaIdosos",type:"text",required:"",placeholder:"Link para planilha de idosos"},model:{value:e.form.planilhaIdosos,callback:function(t){e.$set(e.form,"planilhaIdosos",t)},expression:"form.planilhaIdosos"}})],1),a("b-form-group",{attrs:{id:"input-group-planilhaGerenciamento",label:"Planilha de gerenciamento:","label-for":"planilhaGerenciamento"}},[a("b-form-input",{attrs:{id:"planilhaGerenciamento",type:"text",required:"",placeholder:"Link para planilha de gerenciamento"},model:{value:e.form.planilhaGerenciamento,callback:function(t){e.$set(e.form,"planilhaGerenciamento",t)},expression:"form.planilhaGerenciamento"}})],1),a("b-form-group",{attrs:{id:"input-group-fichaVigilancia",label:"Ficha de vigilância:","label-for":"fichaVigilancia"}},[a("b-form-input",{attrs:{id:"fichaVigilancia",type:"text",required:"",placeholder:"Link para ficha de vigilância"},model:{value:e.form.fichaVigilancia,callback:function(t){e.$set(e.form,"fichaVigilancia",t)},expression:"form.fichaVigilancia"}})],1),a("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Importar")])],1)],1)])},to=[],ao={name:"ImportarUnidade",components:{Breadcrumb:Se},computed:Object(h["b"])(["syncStatus","user"]),data:function(){return{form:{nome:"",distrito:null,_isDeleted:!1,status:"ATIVO",planilhaIdosos:"",planilhaGerenciamento:"",fichaVigilancia:""},distritos:[{text:"Selecione...",value:null},"Norte I","Norte II","Sul","Leste","Oeste"],unidadeId:null}},methods:{onSubmit:function(e){var t=this;e.preventDefault(),console.log(JSON.stringify(this.form));var a="".concat(u,"/v2/importacao/unidades");console.log(a),d.a.post(a,this.form).then((function(e){t.unidadeId=e.data,console.log("unidade cadastrada ",t.unidadeId),t.unidadeId&&t.importFromPlanilhaUnidade()})).catch(f)},importFromPlanilhaUnidade:function(){console.log("emit importUnidadeEvent"),this.$socket.emit("importUnidadeEvent",{idUnidade:this.unidadeId})}},mounted:function(){}},oo=ao,so=(a("bf6c"),Object(w["a"])(oo,eo,to,!1,null,null,null)),no=so.exports,io=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"adicionarUsuario"},[a("Breadcrumb",{attrs:{path:[{text:"Dashboard",url:"/"},{text:"Unidades",url:"/unidades"},{text:"Convidar usuário"}]}}),a("h1",[e._v("Convidar Usuário")]),a("b-form",{on:{submit:e.onSubmit}},[a("b-form-group",{attrs:{id:"input-group-nome",label:"Nome:","label-for":"nome"}},[a("b-form-input",{attrs:{id:"nome",type:"text",required:"",placeholder:"Nome do usuário"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("b-form-group",{attrs:{id:"input-group-email",label:"Email:","label-for":"email"}},[a("b-form-input",{attrs:{id:"email",type:"email",required:"",placeholder:"E-mail"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),a("b-form-group",{attrs:{id:"input-group-permissao",label:"Permissão:","label-for":"permissao"}},[a("b-form-select",{attrs:{id:"permissao",options:e.permissoes,required:""},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}})],1),a("b-form-group",{attrs:{id:"input-group-unidade",label:"Unidade:","label-for":"unidade"}},[a("b-form-select",{attrs:{id:"unidade",options:e.unidades,required:""},model:{value:e.form.unidadeId,callback:function(t){e.$set(e.form,"unidadeId",t)},expression:"form.unidadeId"}})],1),a("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Salvar")])],1)],1)},ro=[],lo=(a("d81d"),a("2909")),co={name:"ConvidarUsuario",components:{Breadcrumb:Se},data:function(){return{form:{name:"",email:"",role:"VIGILANTE",unidadeId:this.$route.params.unidadeId,status:"CONVIDADO",_isDeleted:!1},permissoes:[{text:"Preceptor",value:"PRECEPTOR"},{text:"Vigilante",value:"VIGILANTE"}],unidades:[{text:this.$route.params.unidadeId,value:this.$route.params.unidadeId}]}},methods:{loadUnidades:function(){var e=this,t="".concat(u,"/v2/unidades");console.log(t),d.a.get(t).then((function(t){e.unidades=[{text:"Selecione...",value:""}].concat(Object(lo["a"])(t.data.map((function(e){return{text:e.nome,value:e._id}}))))})).catch(f)},onSubmit:function(e){var t=this;e.preventDefault(),console.log(JSON.stringify(this.form));var a="".concat(u,"/v2/unidades/").concat(this.$route.params.unidadeId,"/usuarios");console.log(a),d.a.post(a,this.form).then((function(){t.$router.push({name:"unidade",params:{id:t.$route.params.unidadeId}}),t.$toasted.global.defaultSuccess()})).catch(f)}},mounted:function(){this.loadUnidades()}},uo=co,mo=Object(w["a"])(uo,io,ro,!1,null,null,null),fo=mo.exports,po=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.unidade?a("div",{staticClass:"idososPorUsuario"},[a("Breadcrumb",{attrs:{path:[{text:"Dashboard",url:"/"},{text:"Unidades",url:"/unidades"},{text:e.unidade.nome,url:"/unidades/"+e.unidade._id},{text:"Idosos"}]}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-9"},[a("h5",[e._v(e._s(e.unidade.nome))]),e.usuario?a("h1",[e._v("Idosos de "+e._s(e.usuario.name))]):e._e()]),a("div",{staticClass:"col-3 text-right"},[a("router-link",{staticClass:"btn btn-primary mt-4",attrs:{to:"/unidades/"+e.unidade._id+"/cadastrarIdoso",title:"Adicionar idoso"}},[e._v("Adicionar")])],1)]),a("b-tabs",{attrs:{"content-class":"mt-3"},on:{"activate-tab":e.tabActivated},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[a("b-tab",{attrs:{title:"Com escalas",lazy:""}},[a("TableIdosos",{attrs:{unidadeId:e.$route.params.unidadeId,userId:e.$route.params.usuarioId,filter:"com-escalas",orderBy:"score"}})],1),a("b-tab",{attrs:{title:"Sem escalas",lazy:""}},[a("TableIdosos",{attrs:{unidadeId:e.$route.params.unidadeId,userId:e.$route.params.usuarioId,filter:"sem-escalas",orderBy:"score"}})],1),a("b-tab",{attrs:{title:"Todos",lazy:""}},[a("TableIdosos",{attrs:{unidadeId:e.$route.params.unidadeId,userId:e.$route.params.usuarioId,filter:"all",orderBy:"score"}})],1)],1)],1):e._e()},vo=[],bo={name:"IdososPorUsuario",components:{TableIdosos:Ca,Breadcrumb:Se},computed:Object(h["b"])(["syncStatus"]),data:function(){return{carregando:!0,unidade:null,usuario:null,tabIndex:0,tabs:["com-escalas","sem-escalas","todos"]}},methods:{formatDate:b,loadUnidade:function(){var e=this,t="".concat(u,"/v2/unidades/").concat(this.$route.params.unidadeId);console.log(t),d.a.get(t).then((function(t){e.unidade=t.data,console.log(e.unidade)})).catch(f)},loadUsuario:function(){var e=this,t="".concat(u,"/v2/names/usuarios/").concat(this.$route.params.usuarioId);console.log(t),d.a.get(t).then((function(t){e.usuario=t.data})).catch(f)},importFromPlanilhaUnidade:function(){console.log("emit importUnidadeEvent"),this.$socket.emit("importUnidadeEvent",{idUnidade:this.$route.params.unidadeId})},tabActivated:function(e,t,a){console.log("tab activated",e,t,a),console.log(location.search);var o=this.$route.params;o.tab=this.tabs[e],this.$router.replace({name:this.$route.name,params:o})}},mounted:function(){var e=this;this.tabIndex=this.tabs.findIndex((function(t){return t===e.$route.params.tab})),this.loadUnidade(),this.loadUsuario()}},ho=bo,go=(a("0c4d"),Object(w["a"])(ho,po,vo,!1,null,null,null)),_o=go.exports,Io=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"auth-content"},[a("div",{staticClass:"auth-modal"},[a("div",{staticClass:"auth-title"},[e._v("Login")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],attrs:{name:"email",placeholder:"E-mail",type:"email"},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{name:"password",placeholder:"Senha",type:"password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),a("button",{on:{click:e.login}},[e._v("Entrar")]),a("router-link",{attrs:{to:"/forgot"}},[e._v("Esqueceu a senha?")])],1)])},xo=[],ko={name:"Auth",data:function(){return{user:{}}},methods:{login:function(){var e=this;d.a.post("".concat(u,"/v2/login"),this.user).then((function(t){e.$store.commit("setUser",t.data),localStorage.setItem(c,JSON.stringify(t.data)),e.$router.push({path:"/"})})).catch(f)}}},Ao=ko,yo=(a("ee68"),Object(w["a"])(Ao,Io,xo,!1,null,null,null)),Co=yo.exports,wo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"auth-content"},[a("div",{staticClass:"auth-modal"},[a("div",{staticClass:"auth-title"},[e._v("Resetar senha")]),a("p",[e._v("Informe seu e-mail, caso ele esteja cadastrado, você receberá um e-mail com instruções para recuperar sua senha.")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],attrs:{name:"email",placeholder:"E-mail",type:"email"},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}}),a("button",{on:{click:e.login}},[e._v("Enviar")])])])},Eo=[],Oo={name:"ForgotPassword",data:function(){return{user:{}}},methods:{login:function(){var e=this;d.a.post("".concat(u,"/v2/forgotPassword"),this.user).then((function(t){e.$toasted.global.defaultSuccess({msg:t.data})})).catch(f)}}},So=Oo,Uo=(a("8e27"),Object(w["a"])(So,wo,Eo,!1,null,null,null)),$o=Uo.exports,Po=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"auth-content"},[a("div",{staticClass:"auth-modal"},[a("div",{staticClass:"auth-title"},[e._v("Alterar Senha")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{name:"password",placeholder:"Nova Senha",type:"password",required:"true"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.confirmPassword,expression:"user.confirmPassword"}],attrs:{name:"confirmPassword",placeholder:"Repetir Senha",type:"password",required:"true"},domProps:{value:e.user.confirmPassword},on:{input:function(t){t.target.composing||e.$set(e.user,"confirmPassword",t.target.value)}}}),a("button",{on:{click:e.salvar}},[e._v("Salvar")])])])},Vo=[],No={name:"ResetPassword",data:function(){return{user:{_id:this.$route.params.id,resetPasswordToken:this.$route.params.token}}},methods:{validateResetToken:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d.a.post("".concat(u,"/v2/validateResetToken"),{_id:e.$route.params.id,token:e.$route.params.token});case 2:a=t.sent,!1===a.data&&f("token expirado");case 4:case"end":return t.stop()}}),t)})))()},salvar:function(){d.a.post("".concat(u,"/v2/resetPassword"),this.user).then((function(e){console.log(e.data),window.location.href=window.location.origin})).catch(f)}},mounted:function(){this.validateResetToken()}},To=No,Do=(a("1157"),Object(w["a"])(To,Po,Vo,!1,null,null,null)),Ro=Do.exports,jo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"auth-content"},[a("div",{staticClass:"auth-modal"},[a("div",{staticClass:"auth-title"},[e._v("Aceitar convite")]),a("p",[e._v("crie uma senha")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{name:"password",placeholder:"Senha",type:"password",required:"true"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.confirmPassword,expression:"user.confirmPassword"}],attrs:{name:"confirmPassword",placeholder:"Repetir Senha",type:"password",required:"true"},domProps:{value:e.user.confirmPassword},on:{input:function(t){t.target.composing||e.$set(e.user,"confirmPassword",t.target.value)}}}),a("button",{on:{click:e.salvar}},[e._v("Salvar")])])])},qo=[],Mo={name:"AcceptInvitation",data:function(){return{user:{_id:this.$route.params.id,invitationToken:this.$route.params.token}}},methods:{salvar:function(){d.a.post("".concat(u,"/v2/acceptInvite"),this.user).then((function(e){console.log(e.data),window.location.href=window.location.origin})).catch(f)}}},Bo=Mo,Lo=(a("dcee"),Object(w["a"])(Bo,jo,qo,!1,null,null,null)),Fo=Lo.exports,Go=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"administradores"},[a("Breadcrumb",{attrs:{path:[{text:"Dashboard",url:"/"},{text:"Administradores"}]}}),a("h1",[e._v("Administradores")]),a("div",{staticClass:"card mb-4"},[a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[e._v(" Usuários "),a("router-link",{staticClass:"btn btn-primary float-right mb-3",attrs:{to:"/administradores/addUsuario"}},[e._v("convidar")])],1),a("b-table",{attrs:{items:e.usuarios,fields:e.fieldsUsuarios},scopedSlots:e._u([{key:"cell(status)",fn:function(t){return["INCOMPLETO"==t.item.status?a("span",[e._v(" INCOMPLETO ")]):"CONVIDADO"==t.item.status?a("span",[e._v(" CONVITE ENVIADO "),a("button",{staticClass:"btn btn-outline-primary",on:{click:function(a){return e.resendInvite(t.item._id)}}},[e._v("reenviar")])]):a("span",[a("b-form-checkbox",{attrs:{value:"ATIVO","unchecked-value":"INATIVO",name:"check-button",switch:"",disabled:t.item._id==e.user.id},on:{change:function(a){return e.toggleAtivo(t.item)}},model:{value:t.item.status,callback:function(a){e.$set(t.item,"status",a)},expression:"data.item.status"}})],1)]}},{key:"cell(acoes)",fn:function(t){return[a("b-button",{staticClass:"btn btn-danger ml-2",attrs:{disabled:t.item._id==e.user.id},on:{click:function(a){return e.deleteUsuario(t.item._id)}}},[e._v("excluir")])]}}])})],1)])],1)},zo=[],Ho={name:"Administradores",components:{Breadcrumb:Se},data:function(){return{usuarios:[],fieldsUsuarios:[{key:"name",label:"nome"},{key:"email",label:"email"},{key:"status",label:"status"},{key:"acoes",label:"ações"}]}},computed:Object(h["b"])(["user"]),methods:{loadUsuarios:function(){var e=this,t="".concat(u,"/v2/administradores");console.log(t),d.a.get(t).then((function(t){e.usuarios=t.data,console.log(e.usuarios)})).catch(f)},resendInvite:function(e){var t=this,a="".concat(u,"/v2/usuarios/resendInvitation/").concat(e);console.log(a),d.a.post(a).then((function(e){console.log(e),t.$toasted.global.defaultSuccess({msg:e.data})})).catch(f)},toggleAtivo:function(e){var t=this,a="".concat(u,"/v2/usuarios/").concat(e._id,"/status/").concat("ATIVO"==e.status?"INATIVO":"INATIVO"==e.status?"ATIVO":e.status);console.log(a),d.a.post(a).then((function(e){t.$toasted.global.defaultSuccess({msg:e.data})})).catch((function(t){e.status="ATIVO"==e.status?"INATIVO":"INATIVO"==e.status?"ATIVO":e.status,f(t)}))},deleteUsuario:function(e){var t=this;this.$bvModal.msgBoxConfirm("Deseja realmente excluir o usuário? Todos os dados serão perdidos!",{okVariant:"danger",okTitle:"excluir",cancelTitle:"cancelar"}).then((function(a){if(console.log(a),!0===a){var o="".concat(u,"/v2/usuarios/").concat(e);console.log(o),d.a.delete(o).then((function(e){console.log(e),t.$toasted.global.defaultSuccess({msg:"Usuário removido com sucesso"}),t.loadUsuarios()})).catch(f)}})).catch((function(e){console.error(e.toString())}))}},mounted:function(){this.loadUsuarios()}},Ko=Ho,Yo=Object(w["a"])(Ko,Go,zo,!1,null,null,null),Jo=Yo.exports,Wo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"adicionarUsuario"},[a("Breadcrumb",{attrs:{path:[{text:"Dashboard",url:"/"},{text:"Administradores",url:"/administradores"},{text:"Convidar"}]}}),a("h1",[e._v("Convidar Administrador")]),a("b-form",{on:{submit:e.onSubmit}},[a("b-form-group",{attrs:{id:"input-group-nome",label:"Nome:","label-for":"nome"}},[a("b-form-input",{attrs:{id:"nome",type:"text",required:"",placeholder:"Nome"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("b-form-group",{attrs:{id:"input-group-email",label:"Email:","label-for":"email"}},[a("b-form-input",{attrs:{id:"email",type:"email",required:"",placeholder:"E-mail"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),a("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Salvar")])],1)],1)},Xo=[],Qo={name:"ConvidarUsuario",components:{Breadcrumb:Se},data:function(){return{form:{name:"",email:"",role:"ADMINISTRADOR",status:"CONVIDADO",_isDeleted:!1}}},methods:{onSubmit:function(e){var t=this;e.preventDefault(),console.log(JSON.stringify(this.form));var a="".concat(u,"/v2/administradores");console.log(a),d.a.post(a,this.form).then((function(){t.$router.push({name:"administradores"}),t.$toasted.global.defaultSuccess()})).catch(f)}}},Zo=Qo,es=Object(w["a"])(Zo,Wo,Xo,!1,null,null,null),ts=es.exports,as=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"adicionarIdoso"},[a("Breadcrumb",{attrs:{path:[{text:"Dashboard",url:"/"},{text:"Adicionar idoso"}]}}),e.$route.query.id?a("h1",[e._v("Editar Idoso")]):a("h1",[e._v("Adicionar Idoso")]),a("b-form",{on:{submit:e.onSubmit}},[a("b-form-group",{attrs:{id:"input-group-nome",label:"Nome:","label-for":"nome"}},[a("b-form-input",{attrs:{id:"nome",type:"text",required:"",placeholder:"Nome do idoso"},model:{value:e.form.nome,callback:function(t){e.$set(e.form,"nome",t)},expression:"form.nome"}})],1),a("b-form-group",{attrs:{id:"input-group-nascimento",label:"Data de nascimento:","label-for":"nascimento"}},[a("b-form-input",{attrs:{id:"nascimento",type:"text",placeholder:"Data de nascimento"},model:{value:e.form.dataNascimento,callback:function(t){e.$set(e.form,"dataNascimento",t)},expression:"form.dataNascimento"}})],1),a("b-form-group",{attrs:{id:"input-group-telefone1",label:"Telefone 1:","label-for":"telefone1"}},[a("b-form-input",{attrs:{id:"telefone1",type:"text",placeholder:"Telefone 1"},model:{value:e.form.telefone1,callback:function(t){e.$set(e.form,"telefone1",t)},expression:"form.telefone1"}})],1),a("b-form-group",{attrs:{id:"input-group-telefone2",label:"Telefone 2:","label-for":"telefone2"}},[a("b-form-input",{attrs:{id:"telefone2",type:"text",placeholder:"Telefone 2"},model:{value:e.form.telefone2,callback:function(t){e.$set(e.form,"telefone2",t)},expression:"form.telefone2"}})],1),a("b-form-group",{attrs:{id:"input-group-agenteSaude",label:"Agente de saúde:","label-for":"agenteSaude"}},[a("b-form-input",{attrs:{id:"agenteSaude",type:"text",placeholder:"Agente de saúde"},model:{value:e.form.agenteSaude,callback:function(t){e.$set(e.form,"agenteSaude",t)},expression:"form.agenteSaude"}})],1),a("b-form-group",{attrs:{id:"input-group-anotacoes",label:"Anotações:","label-for":"anotacoes"}},[a("b-form-input",{attrs:{id:"anotacoes",type:"text",placeholder:"Anotações"},model:{value:e.form.anotacoes,callback:function(t){e.$set(e.form,"anotacoes",t)},expression:"form.anotacoes"}})],1),a("b-form-group",{attrs:{id:"input-group-unidade",label:"Unidade:","label-for":"unidade"}},[a("b-form-select",{attrs:{id:"unidade",options:e.unidades,required:""},on:{change:e.onChangeUnidadeSelect},model:{value:e.form.unidadeId,callback:function(t){e.$set(e.form,"unidadeId",t)},expression:"form.unidadeId"}})],1),a("b-form-group",{attrs:{id:"input-group-vigilante",label:"Vigilante:","label-for":"vigilante"}},[a("b-form-select",{attrs:{id:"vigilante",options:e.vigilantes,disabled:"PRECEPTOR"===e.user.role},model:{value:e.form.vigilanteId,callback:function(t){e.$set(e.form,"vigilanteId",t)},expression:"form.vigilanteId"}})],1),a("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Salvar")])],1)],1)},os=[],ss={name:"CadastrarIdoso",components:{Breadcrumb:Se},computed:Object(h["b"])(["user"]),data:function(){return{form:{nome:"",dataNascimento:"",telefone1:"",telefone2:"",agenteSaude:"",anotacoes:"",unidadeId:this.$route.params.unidadeId,vigilanteId:"",row:"",_isDeleted:!1},unidades:[{text:"Selecione...",value:""}],vigilantes:[{text:"Selecione",value:""}]}},methods:{loadUnidades:function(){var e=this;if("PRECEPTOR"===this.user.role){var t="".concat(u,"/v2/unidades/").concat(this.$route.params.unidadeId);console.log(t),d.a.get(t).then((function(t){e.unidades=[{text:t.data.nome,value:t.data._id}]})).catch(f)}else{var a="".concat(u,"/v2/unidades");console.log(a),d.a.get(a).then((function(t){e.unidades=[{text:"Selecione...",value:""}].concat(Object(lo["a"])(t.data.map((function(e){return{text:e.nome,value:e._id}}))))})).catch(f)}},loadVigilantes:function(e){var t=this;if("PRECEPTOR"!==this.user.role){var a="".concat(u,"/v2/unidades/").concat(e,"/vigilantes");console.log(a),d.a.get(a).then((function(e){console.log(e.data),t.vigilantes=[{text:"Selecione...",value:""}].concat(Object(lo["a"])(e.data.map((function(e){return{text:e.name,value:e._id}}))))})).catch(f)}},onSubmit:function(e){var t=this;e.preventDefault(),console.log(JSON.stringify(this.form));var a="".concat(u,"/v2/unidades/").concat(this.$route.params.unidadeId,"/idosos");console.log(a,this.form),d.a.post(a,this.form).then((function(e){console.log(e.data),t.$router.push({name:"idoso",params:{unidadeId:e.data.unidadeId,idosoId:e.data._id}}),t.$toasted.global.defaultSuccess({msg:"Registro salvo com sucesso"})})).catch(f)},onChangeUnidadeSelect:function(e){this.form.vigilanteId="",this.loadVigilantes(e)}},mounted:function(){var e=this;if(this.loadUnidades(),this.loadVigilantes(this.$route.params.unidadeId),this.$route.query.id){var t="".concat(u,"/v2/idosos/").concat(this.$route.query.id);d.a.get(t).then((function(t){e.form=t.data})).catch(f)}}},ns=ss,is=Object(w["a"])(ns,as,os,!1,null,null,null),rs=is.exports,ds=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.form&&e.unidade?a("div",[a("Breadcrumb",{attrs:{path:[{text:"Dashboard",url:"/"},{text:"Unidades",url:"/unidades"},{text:e.unidade.nome,url:"/unidades/"+e.unidade._id},{text:"Transferir Idosos"}]}}),a("h1",[e._v("Transferir Idosos")]),a("h6",{staticClass:"text-muted mb-3"},[e._v("Utilize essa funcionalidade para transferir todos os idosos de um vigilante para outro")]),a("b-alert",{attrs:{show:"",variant:"warning"}},[a("h4",{staticClass:"alert-heading"},[e._v("Atenção")]),e._v(" Só é possivel transferir idosos para vigilantes ativos. ")]),a("b-form",{on:{submit:e.onSubmit}},[a("b-form-group",{attrs:{id:"input-group-from",label:"De","label-for":"from"}},[a("b-form-select",{attrs:{id:"from",options:e.fromOption,required:"",disabled:""},model:{value:e.form.from,callback:function(t){e.$set(e.form,"from",t)},expression:"form.from"}})],1),a("b-form-group",{attrs:{id:"input-group-to",label:"Para","label-for":"to"}},[a("b-form-select",{attrs:{id:"to",options:e.vigilantesOption,required:""},model:{value:e.form.to,callback:function(t){e.$set(e.form,"to",t)},expression:"form.to"}})],1),a("div",{staticClass:"mt-4"},[a("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Transferir")]),a("strong",{staticClass:"ml-3"},[e._v(" Serão transferidos "),a("CounterIdosos",{attrs:{idUnidade:e.$route.params.unidadeId,idVigilante:e.$route.params.usuarioId}})],1)],1)],1)],1):e._e()},ls=[],cs={name:"TransferirIdosos",components:{Breadcrumb:Se,CounterIdosos:Fa},data:function(){return{form:{from:"",to:""},unidade:null,vigilanteFrom:null,vigilanteTo:null,vigilantesOption:[{text:"Selecione...",value:""}],fromOption:[{text:"Selecione...",value:""}]}},methods:{loadUnidade:function(){var e=this,t="".concat(u,"/v2/unidades/").concat(this.$route.params.unidadeId);console.log(t),d.a.get(t).then((function(t){e.unidade=t.data})).catch(f)},loadVigilante:function(){var e=this,t="".concat(u,"/v2/usuarios/").concat(this.$route.params.usuarioId);console.log(t),d.a.get(t).then((function(t){e.form.from=t.data._id,e.fromOption=[{text:"Selecione...",value:""},{text:t.data.name,value:t.data._id}]})).catch(f)},loadVigilantesAtivos:function(){var e=this,t="".concat(u,"/v2/unidades/").concat(this.$route.params.unidadeId,"/vigilantes");console.log(t),d.a.get(t).then((function(t){e.vigilantesOption=[{text:"Selecione...",value:""}].concat(Object(lo["a"])(t.data.map((function(e){return{text:e.name,value:e._id}})))),console.log(e.vigilantesOption)})).catch(f)},onSubmit:function(e){var t=this;e.preventDefault(),console.log(JSON.stringify(this.form));var a="".concat(u,"/v2/unidades/").concat(this.$route.params.unidadeId,"/idosos/transferir");console.log(a,this.form),d.a.post(a,this.form).then((function(e){console.log(e.data),t.$router.push({path:"/unidades/".concat(t.$route.params.unidadeId)}),t.$toasted.global.defaultSuccess({msg:"Transferência realizada com sucesso"})})).catch(f),console.log(e)}},mounted:function(){this.loadUnidade(),this.loadVigilante(),this.loadVigilantesAtivos()}},us=cs,ms=Object(w["a"])(us,ds,ls,!1,null,null,null),fs=ms.exports,ps=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.idoso?a("div",{staticClass:"idoso"},["ADMINISTRADOR"!==e.user.role?a("Breadcrumb",{attrs:{path:[{text:"Dashboard",url:"/"},{text:"Meus idosos",url:"/meusIdosos/com-escalas"},{text:e.idoso.nome}]}}):e._e(),"ADMINISTRADOR"===e.user.role&&e.unidade?a("Breadcrumb",{attrs:{path:[{text:"Dashboard",url:"/"},{text:"Unidades",url:"/unidades"},{text:e.unidade.nome,url:"/unidades/"+e.idoso.unidadeId},{text:"Idosos",url:"/unidades/"+e.idoso.unidadeId+"/usuarios/"+e.user.id+"/idosos/com-escalas"},{text:e.idoso.nome}]}}):e._e(),a("div",{staticClass:"row"},[a("div",{staticClass:"col-10"},[a("h1",[e._v(" "+e._s(e.idoso.nome)+" ")])]),a("div",{staticClass:"col-2 text-right"},[a("b-dropdown",{attrs:{right:"","no-caret":"",variant:"light",title:"Opções"},scopedSlots:e._u([{key:"button-content",fn:function(){return[a("font-awesome-icon",{attrs:{icon:["fas","ellipsis-v"]}})]},proxy:!0}],null,!1,2044338290)},[a("b-dropdown-item",{attrs:{href:"/unidades/"+e.idoso.unidadeId+"/cadastrarIdoso?id="+e.idoso._id}},[e._v("Editar")]),"ADMINISTRADOR"===e.user.role?a("b-dropdown-item",{on:{click:function(t){return e.deleteIdoso(e.idoso._id)}}},[e._v("Excluir")]):e._e()],1)],1)]),e.idoso.estatisticas&&e.idoso.estatisticas.ultimaEscala?a("div",{staticClass:"badges"},[e.idoso.estatisticas.ultimaEscala.escalas.vulnerabilidade?a("popper",{attrs:{trigger:"hover",options:{placement:"top"}}},[a("div",{staticClass:"popper"},[e._v(" Escala de Vulnerabilidade ")]),a("span",{attrs:{slot:"reference"},slot:"reference"},[a("Badge",{attrs:{value:e.idoso.estatisticas.ultimaEscala.escalas.vulnerabilidade}})],1)]):e._e(),e.idoso.estatisticas.ultimaEscala.escalas.epidemiologica?a("popper",{attrs:{trigger:"hover",options:{placement:"top"}}},[a("div",{staticClass:"popper"},[e._v(" Escala Epidemiológica ")]),a("span",{attrs:{slot:"reference"},slot:"reference"},[a("Badge",{attrs:{value:e.idoso.estatisticas.ultimaEscala.escalas.epidemiologica}})],1)]):e._e(),e.idoso.estatisticas.ultimaEscala.escalas.riscoContagio?a("popper",{attrs:{trigger:"hover",options:{placement:"top"}}},[a("div",{staticClass:"popper"},[e._v(" Risco de Contágio por COVID-19 ")]),a("span",{attrs:{slot:"reference"},slot:"reference"},[a("Badge",{attrs:{value:e.idoso.estatisticas.ultimaEscala.escalas.riscoContagio}})],1)]):e._e(),a("small",{staticClass:"text-muted ml-2"},[e._v("Score "+e._s(e.idoso.estatisticas.ultimaEscala.escalas.scoreOrdenacao))])],1):e._e(),a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col-12 col-md-6 col-lg-7 mb-3"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 mb-3"},[a("div",[a("strong",[e._v("Unidade: ")]),e.unidade?a("UnidadeLink",{attrs:{nome:e.unidade.nome,url:"/unidades/"+e.unidade._id}}):e._e()],1),a("div",[a("strong",[e._v("Agente de saúde:")]),e._v(" "+e._s(e.idoso.agenteSaude)+" ")]),a("div",[a("strong",[e._v("Data de Nascimento:")]),e._v(" "+e._s(e.idoso.dataNascimento)+" ")]),a("div",[a("strong",[e._v("Telefones:")]),e._v(" "+e._s(e.idoso.telefone1)+" "+e._s(e.idoso.telefone2?"/ "+e.idoso.telefone2:"")+" ")])]),a("div",{staticClass:"col-12"},[a("div",[a("strong",[e._v("Vigilante: ")]),e.idoso.vigilanteId?a("UsuarioLink",{attrs:{id:e.idoso.vigilanteId}}):a("span",{staticClass:"atencao"},[e._v("Sem vigilante")])],1),a("div",[a("strong",[e._v("Atendimentos efetuados:")]),a("span",[a("popper",{attrs:{trigger:"hover",options:{placement:"top",modifiers:{offset:{offset:"0,10px"}}}}},[a("div",{staticClass:"popper"},[e._v(" Atendimentos efetuados / total de tentativas ")]),a("span",{attrs:{slot:"reference"},slot:"reference"},[e._v(" "+e._s(e.idoso.estatisticas?e.idoso.estatisticas.qtdAtendimentosEfetuados:0)+"/"+e._s(e.idoso.estatisticas?e.idoso.estatisticas.qtdTotal:0)+" ")])])],1)]),a("div",[a("strong",[e._v("Último atendimento:")]),e.idoso.estatisticas&&e.idoso.estatisticas.ultimoAtendimento?a("span",{staticClass:"statusUltimoAtendimento",class:{atendido:e.idoso.estatisticas.ultimoAtendimento.atendeu}},[a("popper",{attrs:{trigger:"hover",options:{placement:"top",modifiers:{offset:{offset:"0,10px"}}}}},[a("div",{staticClass:"popper"},[e._v(" Último atendimento: "),e.idoso.estatisticas.ultimoAtendimento.atendeu?a("span",[e._v("Ligação atendida")]):e._e(),e.idoso.estatisticas.ultimoAtendimento.atendeu?e._e():a("span",[e._v("Não atendeu a ligação")])]),a("span",{attrs:{slot:"reference"},slot:"reference"},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.idoso.estatisticas.ultimoAtendimento.atendeu,expression:"idoso.estatisticas.ultimoAtendimento.atendeu"}]},[a("font-awesome-icon",{attrs:{icon:["far","check-circle"]}})],1),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.idoso.estatisticas.ultimoAtendimento.atendeu,expression:"!idoso.estatisticas.ultimoAtendimento.atendeu"}]},[a("font-awesome-icon",{attrs:{icon:["far","times-circle"]}})],1),e._v(" "+e._s(e.formatDate(e.idoso.estatisticas.ultimoAtendimento.timestamp))+" ")])])],1):e._e(),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.idoso.estatisticas||!e.idoso.estatisticas.ultimoAtendimento,expression:"!idoso.estatisticas || !idoso.estatisticas.ultimoAtendimento"}],staticClass:"statusUltimoAtendimento atencao"},[a("popper",{attrs:{trigger:"hover",options:{placement:"top",modifiers:{offset:{offset:"0,10px"}}}}},[a("div",{staticClass:"popper"},[e._v(" Último atendimento: não há registros ")]),a("span",{attrs:{slot:"reference"},slot:"reference"},[a("font-awesome-icon",{attrs:{icon:["fas","exclamation-circle"]}}),e._v(" pendente ")],1)])],1)]),a("div",[a("strong",[e._v("Sugestão de próximo atendimento:")]),e.idoso.estatisticas&&e.idoso.estatisticas.ultimaEscala?a("span",{staticClass:"dataProximoAtendimento"},[a("popper",{attrs:{trigger:"hover",options:{placement:"top",modifiers:{offset:{offset:"0,10px"}}}}},[a("div",{staticClass:"popper"},[e._v(" Sugestão de próximo atendimento ")]),a("span",{attrs:{slot:"reference"},slot:"reference"},[a("font-awesome-icon",{attrs:{icon:["far","clock"]}}),e._v(" "+e._s(e.formatDate(e.idoso.estatisticas.ultimaEscala.escalas.dataProximoAtendimento))+" ")],1)])],1):a("span",[a("popper",{attrs:{trigger:"hover",options:{placement:"top",modifiers:{offset:{offset:"0,10px"}}}}},[a("div",{staticClass:"popper"},[e._v(" Sugestão de próximo atendimento ")]),a("span",{attrs:{slot:"reference"},slot:"reference"},[a("font-awesome-icon",{attrs:{icon:["far","clock"]}}),e._v(" Não definido ")],1)])],1)])])])])])]),a("div",{staticClass:"col-12 col-md-6 col-lg-5 mb-3"},[a("Anotacoes",{attrs:{idosoId:e.idoso._id,primeiraAnotacao:e.idoso.anotacoes}})],1)]),a("div",{staticClass:"row mt-5 mb-3"},[e._m(0),a("div",{staticClass:"col text-right"},[a("a",{staticClass:"btn btn-primary",attrs:{target:"_blank",title:"Novo atendimento",href:e.novoAtendimentoURL(e.idoso,e.user)}},[a("font-awesome-icon",{attrs:{icon:["fas","comment-medical"]}}),e._v(" Novo atendimento ")],1)])]),a("b-table",{attrs:{items:e.atendimentos,fields:e.fields,"primary-key":"_id",busy:e.carregandoAtendimentos,"show-empty":""},scopedSlots:e._u([{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-primary my-2"},[a("b-spinner",{staticClass:"align-middle"}),a("strong",[e._v(" Carregando...")])],1)]},proxy:!0},{key:"empty",fn:function(){return[a("div",{staticClass:"text-center text-muted"},[e._v("Não há registros")])]},proxy:!0},{key:"cell(col-data)",fn:function(t){return[a("router-link",{attrs:{to:"/unidades/"+e.$route.params.unidadeId+"/atendimentos/"+t.item._id}},[e._v(" "+e._s(e.formatDate(t.item.timestamp))+" ")])]}},{key:"cell(col-status)",fn:function(t){return[a("span",{staticClass:"statusUltimoAtendimento",class:{atendido:t.item.atendeu}},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.item.atendeu,expression:"data.item.atendeu"}]},[a("font-awesome-icon",{attrs:{icon:["far","check-circle"]}}),e._v(" Ligação atendida ")],1),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.item.atendeu,expression:"!data.item.atendeu"}]},[a("font-awesome-icon",{attrs:{icon:["far","times-circle"]}}),e._v(" Ligação não atendida ")],1)])]}},{key:"cell(col-escalas)",fn:function(t){return[t.item.escalas?a("div",{staticClass:"badges"},[t.item.escalas.vulnerabilidade?a("popper",{attrs:{trigger:"hover",options:{placement:"top"}}},[a("div",{staticClass:"popper"},[e._v(" Escala de Vulnerabilidade ")]),a("span",{attrs:{slot:"reference"},slot:"reference"},[a("Badge",{attrs:{value:t.item.escalas.vulnerabilidade}})],1)]):e._e(),t.item.escalas.epidemiologica?a("popper",{attrs:{trigger:"hover",options:{placement:"top"}}},[a("div",{staticClass:"popper"},[e._v(" Escala Epidemiológica ")]),a("span",{attrs:{slot:"reference"},slot:"reference"},[a("Badge",{attrs:{value:t.item.escalas.epidemiologica}})],1)]):e._e(),t.item.escalas.riscoContagio?a("popper",{attrs:{trigger:"hover",options:{placement:"top"}}},[a("div",{staticClass:"popper"},[e._v(" Risco de Contágio por COVID-19 ")]),a("span",{attrs:{slot:"reference"},slot:"reference"},[a("Badge",{attrs:{value:t.item.escalas.riscoContagio}})],1)]):e._e()],1):e._e()]}},{key:"cell(col-vigilante)",fn:function(e){return[a("UsuarioLink",{attrs:{id:e.item.vigilanteId}})]}}],null,!1,299233299)})],1):e._e()},vs=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col"},[a("h2",{},[e._v("Histórico de atendimentos")])])}],bs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"unidadeLink"},["ADMINISTRADOR"==e.user.role?a("router-link",{attrs:{to:e.unidadeUrl}},[e._v(e._s(e.unidadeName))]):a("span",[e._v(e._s(e.unidadeName))])],1)},hs=[],gs={name:"UnidadeLink",props:["id","nome","url"],computed:Object(h["b"])(["user"]),data:function(){return{unidadeName:"",unidadeUrl:""}},methods:{getUnidadeName:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="".concat(u,"/v2/names/unidades/").concat(e.id),console.log(a),t.prev=2,t.next=5,d.a.get(a);case 5:o=t.sent,console.log(o),e.unidadeName=o.data,e.unidadeUrl="/unidades/".concat(e.id),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](2),e.unidadeName=e.id,console.error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))()}},mounted:function(){this.nome&&this.url?(console.log("já definido"),this.unidadeName=this.nome,this.unidadeUrl=this.url):(console.log("não definido"),this.getUnidadeName())}},_s=gs,Is=(a("6904"),Object(w["a"])(_s,bs,hs,!1,null,null,null)),xs=Is.exports,ks=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"usuarioLink"},["ADMINISTRADOR"==e.user.role&&e.usuarioUrl?a("router-link",{attrs:{to:e.usuarioUrl}},[e._v(e._s(e.usuarioName))]):a("span",[e._v(e._s(e.usuarioName))])],1)},As=[],ys={name:"UsuarioLink",props:["id"],computed:Object(h["b"])(["user"]),data:function(){return{usuarioName:"",usuarioUrl:""}},methods:{getUsuarioName:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="".concat(u,"/v2/names/usuarios/").concat(e.id),console.log(a),t.prev=2,t.next=5,d.a.get(a);case 5:o=t.sent,console.log("USUARIOLINK",o),e.usuarioName=o.data.name,o.data.unidadeId&&(e.usuarioUrl="/unidades/".concat(o.data.unidadeId,"/usuarios/").concat(e.id,"/idosos/com-escalas")),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](2),e.usuarioName="Não encontrado",console.error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))()}},mounted:function(){this.getUsuarioName()}},Cs=ys,ws=(a("3f89"),Object(w["a"])(Cs,ks,As,!1,null,null,null)),Es=ws.exports,Os=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"anotacoes card mb-4"},[a("div",{staticClass:"card-body p-0"},[a("header",{},[a("h5",{staticClass:"card-title text-left my-3 ml-3 d-inline-block"},[e._v(" Anotações ")]),a("button",{staticClass:"btn btn-outline-primary mr-3 mt-2 float-right",on:{click:function(t){return e.openModalAdicionarAnotacao()}}},[e._v("Nova")])]),a("ul",{staticClass:"lista"},[e._l(e.anotacoes,(function(t){return a("li",{key:t._id},[a("div",{staticClass:"small text-muted mb-2"},[e._v(" "+e._s(t.usuarioName)+" • "+e._s(t.usuarioRole)+" • "+e._s(e.formatDate(t.timestamp))+" ")]),a("p",[e._v(e._s(t.text))])])})),e.primeiraAnotacao?a("li",[a("div",{staticClass:"small text-muted mb-2"},[e._v(" Desconhecido • há muito tempo atrás ")]),a("p",[e._v(e._s(e.primeiraAnotacao))])]):e._e()],2),0!=e.anotacoes.length||e.primeiraAnotacao?e._e():a("div",{staticClass:"p-3 text-muted"},[e._v(" Não há anotações ")])]),a("b-modal",{attrs:{id:"modal-adicionar-anotacao",title:"Adicionar anotação"},on:{hidden:e.modalAdicionarAnotacaoReset,ok:e.modalAdicionarAnotacaoHandleOk}},[a("form",{ref:"form",on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.modalAdicionarAnotacaoHandleSubmit(t)}}},[a("b-form-group",{attrs:{label:"","label-for":"textarea",state:e.textState,"invalid-feedback":e.textInvalidFeedback||"A mensagem não pode estar vazia"}},[a("b-form-textarea",{attrs:{id:"textarea",placeholder:"Escreva alguma coisa...",rows:"3","max-rows":"6",required:"",state:e.textState,"invalid-feedback":e.textInvalidFeedback||"A mensagem não pode estar vazia"},model:{value:e.novaAnotacao.text,callback:function(t){e.$set(e.novaAnotacao,"text",t)},expression:"novaAnotacao.text"}})],1)],1)])],1)},Ss=[],Us={name:"Anotacoes",props:["idosoId","primeiraAnotacao"],computed:Object(h["b"])(["user"]),data:function(){return{anotacoes:[],novaAnotacao:{idosoId:this.idosoId,usuarioId:null,usuarioName:"",usuarioRole:"",timestamp:null,text:"",_isDeleted:!1},textState:null,textInvalidFeedback:""}},methods:{formatDate:b,loadAnotacoes:function(){var e=this,t="".concat(u,"/v2/idosos/").concat(this.idosoId,"/anotacoes");console.log(t),d.a.get(t).then((function(t){e.anotacoes=t.data})).catch((function(e){console.error(e),f(e)}))},openModalAdicionarAnotacao:function(){this.textState=null,this.textInvalidFeedback="",this.novaAnotacao={idosoId:this.idosoId,text:"",usuarioId:this.user.id,usuarioName:this.user.name,usuarioRole:this.user.role,timestamp:null,_isDeleted:!1},this.$bvModal.show("modal-adicionar-anotacao")},modalAdicionarAnotacaoReset:function(){console.log("reset"),this.novaAnotacao={idosoId:this.idosoId,text:"",usuarioId:null,usuarioName:"",usuarioRole:"",timestamp:null,_isDeleted:!1},this.textState=null,this.textInvalidFeedback=""},modalAdicionarAnotacaoHandleOk:function(e){e.preventDefault(),console.log("ok"),this.modalAdicionarAnotacaoHandleSubmit()},modalAdicionarAnotacaoHandleSubmit:function(){var e=this;if(this.textState=this.$refs.form.checkValidity(),this.textState){this.novaAnotacao.timestamp=new Date;var t="".concat(u,"/v2/idosos/").concat(this.novaAnotacao.idosoId,"/anotacoes");console.log(t),d.a.post(t,this.novaAnotacao).then((function(t){e.$toasted.global.defaultSuccess({msg:t.data}),e.loadAnotacoes(),e.$nextTick((function(){e.$bvModal.hide("modal-adicionar-anotacao")}))})).catch((function(t){t&&t.response&&t.response.data?(e.textState=!1,e.textInvalidFeedback=t.response.data):f(t)}))}}},mounted:function(){this.loadAnotacoes()}},$s=Us,Ps=(a("8aa3"),Object(w["a"])($s,Os,Ss,!1,null,null,null)),Vs=Ps.exports,Ns={name:"Idoso",components:{Badge:_a,popper:xa.a,UnidadeLink:xs,UsuarioLink:Es,Breadcrumb:Se,Anotacoes:Vs},computed:Object(h["b"])(["user"]),data:function(){return{idoso:null,unidade:null,atendimentos:[],fields:[{key:"col-data",label:"Data"},{key:"col-status",label:"Status"},{key:"col-escalas",label:"Escalas"},{key:"col-vigilante",label:"Atendente"}],carregandoAtendimentos:!1}},methods:{novoAtendimentoURL:p,formatDate:b,loadIdoso:function(){var e=this,t="".concat(u,"/v2/idosos/").concat(this.$route.params.idosoId);console.log(t),d.a.get(t).then((function(t){e.idoso=t.data,console.log(e.idoso),e.loadAtendimentos()})).catch(f)},loadAtendimentos:function(){var e=this;this.carregandoAtendimentos=!0;var t="".concat(u,"/v2/idosos/").concat(this.$route.params.idosoId,"/atendimentos");console.log(t),d.a.get(t).then((function(t){e.atendimentos=t.data,e.carregandoAtendimentos=!1,console.log(e.atendimentos)})).catch((function(e){console.error(e),f(e)}))},loadUnidade:function(){var e=this,t="".concat(u,"/v2/unidades/").concat(this.$route.params.unidadeId);console.log(t),d.a.get(t).then((function(t){e.unidade=t.data,console.log(e.unidade)})).catch(f)},deleteIdoso:function(e){var t=this;this.$bvModal.msgBoxConfirm("Deseja realmente excluir o idoso? Todos os dados serão perdidos!",{okVariant:"danger",okTitle:"excluir",cancelTitle:"cancelar"}).then((function(a){if(console.log(a),!0===a){var o="".concat(u,"/v2/idosos/").concat(e);console.log(o),d.a.delete(o).then((function(e){console.log(e.data),console.log("/unidades/".concat(t.unidade._id,"/usuarios/").concat(t.user._id,"/idosos/all")),t.$router.push({path:"/unidades/".concat(t.unidade._id,"/usuarios/").concat(t.user.id,"/idosos/all")}),t.$toasted.global.defaultSuccess({msg:"Idoso removido com sucesso"})})).catch(f)}})).catch((function(e){console.error(e.toString())}))}},mounted:function(){this.loadIdoso(),this.loadUnidade()}},Ts=Ns,Ds=(a("672a"),Object(w["a"])(Ts,ps,vs,!1,null,null,null)),Rs=Ds.exports,js=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.atendimento?a("div",{staticClass:"atendimento"},["ADMINISTRADOR"!==e.user.role&&e.idoso?a("Breadcrumb",{attrs:{path:[{text:"Dashboard",url:"/"},{text:"Meus idosos",url:"/meusIdosos/com-escalas"},{text:e.idoso.nome,url:"/unidades/"+e.idoso.unidadeId+"/idosos/"+e.idoso._id},{text:e.formatDate(e.atendimento.timestamp)}]}}):e._e(),"ADMINISTRADOR"===e.user.role&&e.idoso&&e.unidade?a("Breadcrumb",{attrs:{path:[{text:"Dashboard",url:"/"},{text:"Unidades",url:"/unidades"},{text:e.unidade.nome,url:"/unidades/"+e.idoso.unidadeId},{text:"Idosos",url:"/unidades/"+e.idoso.unidadeId+"/usuarios/"+e.user.id+"/idosos/com-escalas"},{text:e.idoso.nome,url:"/unidades/"+e.idoso.unidadeId+"/idosos/"+e.idoso._id},{text:e.formatDate(e.atendimento.timestamp)}]}}):e._e(),a("h1",[e._v("Atendimento")]),a("h6",{staticClass:"text-muted"},[e._v(e._s(e.formatDate(e.atendimento.timestamp)))]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-lg-7"},[a("b-card",{staticClass:"mb-4",attrs:{title:"Idoso"}},[e.idoso?a("b-card-text",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6"},[a("div",[a("b",[e._v("Nome: ")]),a("IdosoLink",{attrs:{nome:e.idoso.nome,url:"/unidades/"+e.idoso.unidadeId+"/idosos/"+e.idoso._id}})],1),a("div",[a("b",[e._v("Data de nascimento:")]),e._v(" "+e._s(e.idoso.dataNascimento)+" ")]),a("div",[a("b",[e._v("Telefones:")]),e._v(" "+e._s(e.idoso.telefone1)+" "+e._s(e.idoso.telefone2?"/ "+e.idoso.telefone2:"")+" ")])]),a("div",{staticClass:"col-lg-6"},[a("div",[a("b",[e._v("Unidade: ")]),e.unidade?a("UnidadeLink",{attrs:{nome:e.unidade.nome,url:"/unidades/"+e.unidade._id}}):e._e()],1),a("div",[a("b",[e._v("Agente de saúde:")]),e._v(" "+e._s(e.idoso.agenteSaude)+" ")]),a("div",[a("b",[e._v("Vigilante: ")]),a("UsuarioLink",{attrs:{id:e.idoso.vigilanteId}})],1)])])]):e._e()],1),e.atendimento.atendeu?a("b-card",{staticClass:"mb-4",attrs:{title:"Sintomas do idoso"}},[a("b-card-text",e._l(e.atendimento.raw["S05"],(function(e){return a("FormResponse",{key:e.question,attrs:{item:e}})})),1)],1):e._e(),e.atendimento.atendeu?a("b-card",{staticClass:"mb-4",attrs:{title:"Comorbidades"}},[a("b-card-text",e._l(e.atendimento.raw["S06"],(function(e){return a("FormResponse",{key:e.question,attrs:{item:e}})})),1)],1):e._e(),e.atendimento.atendeu?a("b-card",{staticClass:"mb-4",attrs:{title:"Acompanhantes no domicílio"}},[a("b-card-text",[e._l(e.atendimento.raw["S09"],(function(e){return a("FormResponse",{key:e.question,attrs:{item:e}})})),e._l(e.atendimento.raw["S10"],(function(e){return a("FormResponse",{key:e.question,attrs:{item:e}})})),e._l(e.atendimento.raw["S11"],(function(e){return a("FormResponse",{key:e.question,attrs:{item:e}})}))],2)],1):e._e(),e.atendimento.atendeu?a("b-card",{staticClass:"mb-4",attrs:{title:"Identificação de vulnerabilidades"}},[a("b-card-text",e._l(e.atendimento.raw["S12"],(function(e){return a("FormResponse",{key:e.question,attrs:{item:e}})})),1)],1):e._e()],1),a("div",{staticClass:"col-lg-5"},[a("b-card",{staticClass:"mb-4",attrs:{title:"Ficha do atendimento"}},[a("b-card-text",[a("div",[a("b",[e._v("Data de realização:")]),e._v(" "+e._s(e.formatDate(e.atendimento.timestamp))+" ")]),a("div",[a("b",[e._v("Status da chamada: ")]),a("span",{staticClass:"statusUltimoAtendimento",class:{atendido:e.atendimento.atendeu}},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.atendimento.atendeu,expression:"atendimento.atendeu"}]},[a("font-awesome-icon",{attrs:{icon:["far","check-circle"]}}),e._v(" Ligação atendida ")],1),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.atendimento.atendeu,expression:"!atendimento.atendeu"}]},[a("font-awesome-icon",{attrs:{icon:["far","times-circle"]}}),e._v(" Ligação não atendida ")],1)])]),a("div",[a("b",[e._v("Atendente: ")]),a("UsuarioLink",{attrs:{id:e.atendimento.vigilanteId}})],1),a("div",[a("b",[e._v("Tipo de atendimento:")]),e._v(" "+e._s(e.atendimento.tipo)+" ")]),a("div",[a("b",[e._v("Fonte das informações:")]),e._v(" "+e._s(e.atendimento.fonte)+" ")]),a("div",[a("b",[e._v("Idade:")]),e._v(" "+e._s(e.atendimento.idadeIdoso)+" anos ")]),a("div",[a("b",[e._v("Duração da chamada:")]),e._v(" "+e._s(e.atendimento.duracaoChamada)+" ")])])],1),e.atendimento.atendeu?a("b-card",{staticClass:"mb-4",attrs:{title:"Resultado do atendimento"}},[a("b-card-text",[a("div",[a("b",[e._v("Escala de vulnerabilidade")]),e.atendimento.escalas.vulnerabilidade?a("div",[a("Badge",{attrs:{value:e.atendimento.escalas.vulnerabilidade}})],1):e._e()]),a("br"),a("div",[a("b",[e._v("Escala epidemiológica")]),e.atendimento.escalas.epidemiologica?a("div",[a("Badge",{attrs:{value:e.atendimento.escalas.epidemiologica}})],1):e._e()]),a("br"),a("div",[a("b",[e._v("Escala de Risco COVID")]),e.atendimento.escalas.riscoContagio?a("div",[a("Badge",{attrs:{value:e.atendimento.escalas.riscoContagio}})],1):e._e()]),a("br"),a("div",[a("b",[e._v("Score de ordenação")]),e.atendimento.escalas.scoreOrdenacao?a("div",[e._v(" "+e._s(e.atendimento.escalas.scoreOrdenacao)+" ")]):e._e()])])],1):e._e(),e.atendimento.raw["S08"]?a("b-card",{staticClass:"mb-4",attrs:{title:"Epidemiologia"}},[a("b-card-text",e._l(e.atendimento.raw["S08"],(function(e){return a("FormResponse",{key:e.question,attrs:{item:e}})})),1)],1):e._e(),e.atendimento.raw["S08"]?e._e():a("b-card",{staticClass:"mb-4",attrs:{title:"Epidemiologia"}},[a("b-card-text",[e._v(" O idoso ainda não possui atendimentos efetuados. A epidemiologia é colhida no primeiro atendimento. ")])],1)],1)])],1):e._e()},qs=[],Ms=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-response"},[a("b",[e._v(e._s(e.item.question.substring(9)))]),a("small",{staticClass:"text-muted"},[e._v(" "+e._s(e.item.question.substring(0,8))+" ")]),Array.isArray(e.item.response)?a("div",[a("ul",e._l(e.item.response,(function(t){return a("li",{key:t},[e._v(" "+e._s(t)+" ")])})),0)]):e.item.response?a("div",[e._v(" "+e._s(e.item.response)+" ")]):a("div",[e._v(" - ")])])},Bs=[],Ls={name:"FormResponse",props:["item"]},Fs=Ls,Gs=(a("acb0"),Object(w["a"])(Fs,Ms,Bs,!1,null,null,null)),zs=Gs.exports,Hs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"idosoLink"},[a("router-link",{attrs:{to:e.urlIdoso}},[e._v(e._s(e.nomeIdoso))])],1)},Ks=[],Ys={name:"IdosoLink",props:["id","nome","url"],computed:Object(h["b"])(["user"]),data:function(){return{nomeIdoso:"",urlIdoso:""}},methods:{getIdoso:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="".concat(u,"/v2/idosos/").concat(e.id),console.log(a),t.prev=2,t.next=5,d.a.get(a);case 5:o=t.sent,e.nomeIdoso=o.data.nome,e.urlIdoso="/unidades/".concat(o.data.unidadeId,"/idosos/").concat(o.data._id),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](2),e.nomeIdoso=e.id,console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})))()}},mounted:function(){this.nome&&this.url?(console.log("já definido",this.url),this.nomeIdoso=this.nome,this.urlIdoso=this.url):(console.log("não definido"),this.getIdoso())}},Js=Ys,Ws=(a("425b"),Object(w["a"])(Js,Hs,Ks,!1,null,null,null)),Xs=Ws.exports,Qs={name:"Atendimento",components:{Badge:_a,FormResponse:zs,UnidadeLink:xs,UsuarioLink:Es,IdosoLink:Xs,Breadcrumb:Se},computed:Object(h["b"])(["user"]),data:function(){return{atendimento:null,idoso:null,loading:!1,unidade:null}},methods:{formatDate:b,loadAtendimento:function(){var e=this,t="".concat(u,"/v2/unidades/").concat(this.$route.params.unidadeId,"/atendimentos/").concat(this.$route.params.atendimentoId);console.log(t),d.a.get(t).then((function(t){e.atendimento=t.data,console.log(e.atendimento),e.loadIdoso(),e.loadUnidade()})).catch(f)},loadIdoso:function(){var e=this,t="".concat(u,"/v2/idosos/").concat(this.atendimento.idosoId);console.log(t),d.a.get(t).then((function(t){e.idoso=t.data,console.log(e.idoso)})).catch(f)},loadUnidade:function(){var e=this,t="".concat(u,"/v2/unidades/").concat(this.$route.params.unidadeId);console.log(t),d.a.get(t).then((function(t){e.unidade=t.data,console.log(e.unidade)})).catch(f)}},mounted:function(){this.loadAtendimento()}},Zs=Qs,en=(a("3cef"),Object(w["a"])(Zs,js,qs,!1,null,null,null)),tn=en.exports,an=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.atendimentos?a("div",[a("h1",[e._v("Atendimentos "),a("router-link",{staticClass:"btn btn-outline-primary",attrs:{to:"/avalins/novo",target:"_blank"}},[e._v(" Novo ")])],1),a("b-table",{attrs:{items:e.atendimentos,fields:e.fields,"primary-key":"_id",busy:e.carregandoAtendimentos,"show-empty":""},scopedSlots:e._u([{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-primary my-2"},[a("b-spinner",{staticClass:"align-middle"}),a("strong",[e._v(" Carregando...")])],1)]},proxy:!0},{key:"empty",fn:function(){return[a("div",{staticClass:"text-center text-muted"},[e._v("Não há registros")])]},proxy:!0},{key:"cell(col-data)",fn:function(t){return[a("router-link",{attrs:{to:"/avalins/detalhar/"+t.item._id}},[e._v(" "+e._s(e.formatDate(t.item.timestamp))+" ")])]}},{key:"cell(col-score)",fn:function(t){return[t.item.escalas?a("Badge",{attrs:{value:t.item.escalas.risco}}):e._e()]}}],null,!1,3279807690)})],1):e._e()},on=[],sn={name:"Listar",components:{Badge:_a},data:function(){return{atendimentos:[],fields:[{key:"col-data",label:"Data"},{key:"col-score",label:"Risco de queda"}],carregandoAtendimentos:!1}},methods:{formatDate:b,loadAtendimentos:function(){var e=this;this.carregandoAtendimentos=!0;var t="".concat(u,"/v2/avalins/atendimentos/all");console.log(t),d.a.get(t).then((function(t){e.atendimentos=t.data,e.carregandoAtendimentos=!1,console.log(e.atendimentos)})).catch((function(e){console.error(e),f(e)}))}},mounted:function(){this.loadAtendimentos()}},nn=sn,rn=Object(w["a"])(nn,an,on,!1,null,null,null),dn=rn.exports,ln=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},cn=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("iframe",{attrs:{id:"iframe-formulario",src:"https://docs.google.com/forms/d/e/1FAIpQLSdDuf8lm8n4_coFF08dAFc6QeY84AJpDFGpohaympZq7KGDKA/viewform?embedded=true",width:"100%",height:"100%",frameborder:"0",marginheight:"0",marginwidth:"0"}},[e._v("Carregando…")])])}],un={name:"Novo"},mn=un,fn=(a("a35c"),Object(w["a"])(mn,ln,cn,!1,null,null,null)),pn=fn.exports,vn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.atendimento?a("div",[a("h1",[e._v("Atendimento - Escala de Equilibrio de Berg")]),a("p",[e._v(e._s(e.formatDate(e.atendimento.timestamp)))]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-12"},[a("b-card",{attrs:{title:"Paciente"}},[a("b-card-text",[a("div",[a("strong",[e._v("Nome:")]),e._v(" Seu João ")]),a("div",[a("strong",[e._v("Idade:")]),e._v(" 76 anos ")])])],1)],1)]),"EscalaEquilibrioBerg"===e.atendimento.tipo?a("EscalaEquilibrioBerg",{attrs:{atendimento:e.atendimento}}):a("div",[e._v("Escala não encontrada!")])],1):e._e()},bn=[],hn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.atendimento?a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col-xs-12 col-lg-8"},[a("b-card",{staticClass:"mb-4",attrs:{title:"Respostas"}},[a("b-card-text",e._l(e.atendimento.raw["S02"],(function(e){return a("FormResponse",{key:e.question,attrs:{item:e}})})),1)],1)],1),a("div",{staticClass:"col-xs-12 col-lg-4"},[e.atendimento.escalas?a("b-card",{staticClass:"mb-4",attrs:{title:"Resultado"}},[a("b-card-text",[a("strong",[e._v("Risco de Queda: ")]),a("Badge",{attrs:{value:e.atendimento.escalas.risco}}),a("br"),a("strong",[e._v("Score: ")]),e._v(" "+e._s(e.atendimento.escalas.score)+" ")],1)],1):e._e(),e.atendimento.descricao?a("b-card",{staticClass:"mb-4"},[a("b-card-text",[a("div",{domProps:{innerHTML:e._s(e.atendimento.descricao)}})])],1):e._e()],1)]):e._e()},gn=[],_n={name:"EscalaEquilibrioBerg",props:["atendimento"],components:{Badge:_a,FormResponse:zs},data:function(){return{}},methods:{formatDate:b},mounted:function(){}},In=_n,xn=Object(w["a"])(In,hn,gn,!1,null,null,null),kn=xn.exports,An={name:"Detalhar",components:{EscalaEquilibrioBerg:kn},data:function(){return{atendimento:null}},methods:{formatDate:b,loadAtendimento:function(){var e=this,t="".concat(u,"/v2/avalins/atendimentos/detalhar/").concat(this.$route.params.atendimentoId);console.log(t),d.a.get(t).then((function(t){e.atendimento=t.data,console.log(e.atendimento)})).catch((function(e){console.error(e),f(e)}))}},mounted:function(){this.loadAtendimento()}},yn=An,Cn=Object(w["a"])(yn,vn,bn,!1,null,null,null),wn=Cn.exports,En=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"atendimento"},["ADMINISTRADOR"!==e.user.role?a("Breadcrumb",{attrs:{path:[{text:"Dashboard",url:"/"},{text:"Meus idosos",url:"/meusIdosos/com-escalas"},{text:e.$route.query.nomeIdoso,url:"/unidades/"+e.$route.query.idUnidade+"/idosos/"+e.$route.query.idIdoso},{text:"Novo atendimento"}]}}):e._e(),"ADMINISTRADOR"===e.user.role?a("Breadcrumb",{attrs:{path:[{text:"Dashboard",url:"/"},{text:"Unidades",url:"/unidades"},{text:e.$route.query.idUnidade,url:"/unidades/"+e.$route.query.idUnidade},{text:"Idosos",url:"/unidades/"+e.$route.query.idUnidade+"/usuarios/"+e.user.id+"/idosos/com-escalas"},{text:e.$route.query.nomeIdoso,url:"/unidades/"+e.$route.query.idUnidade+"/idosos/"+e.$route.query.idIdoso},{text:"Novo atendimentos"}]}}):e._e(),a("iframe",{attrs:{id:"iframe-ficha-vigilancia",src:e.iframeURL,width:"100%",height:"100%",frameborder:"0",marginheight:"0",marginwidth:"0"}},[e._v("Carregando…")])],1)},On=[],Sn={name:"CadastrarAtendimento",components:{Breadcrumb:Se},computed:Object(h["b"])(["user"]),data:function(){return{loading:!1,iframeURL:v(this.$route.query.idIdoso,this.$route.query.idVigilante,this.$route.query.idUnidade,this.$route.query.tipoAtendimento)}},methods:{googleFormIframeURL:v},mounted:function(){}},Un=Sn,$n=(a("534b"),Object(w["a"])(Un,En,On,!1,null,null,null)),Pn=$n.exports;o["default"].use(ve["a"]);var Vn=[{name:"Detalharavalins",path:"/avalins/detalhar/:atendimentoId",component:wn},{name:"Novoavalins",path:"/avalins/novo",component:pn},{name:"avalins",path:"/avalins",component:dn},{name:"home",path:"/",component:Ve},{name:"idososSpreadsheet",path:"/googlesheets/idosos",component:vt},{name:"gerenciamentoSpreadsheet",path:"/googlesheets/gerenciamento",component:la},{name:"meusIdosos",path:"/meusIdosos/:tab",component:Sa},{name:"transferirIdosos",path:"/unidades/:unidadeId/usuarios/:usuarioId/transferirIdosos",component:fs,meta:{requiresAdmin:!0}},{name:"idososPorUsuario",path:"/unidades/:unidadeId/usuarios/:usuarioId/idosos/:tab",component:_o,meta:{requiresAdmin:!0}},{name:"auth",path:"/auth",component:Co},{name:"forgotPassword",path:"/forgot",component:$o},{name:"resetPassword",path:"/reset/:id/:token",component:Ro},{name:"convidarUsuarioDaUnidade",path:"/unidades/:unidadeId/addUsuario",component:fo,meta:{requiresAdmin:!0}},{name:"convidarAdministrador",path:"/administradores/addUsuario",component:ts,meta:{requiresAdmin:!0}},{name:"acceptInvitation",path:"/acceptInvitation/:id/:token",component:Fo},{name:"atendimento",path:"/unidades/:unidadeId/atendimentos/:atendimentoId",component:tn},{name:"cadastrarAtendimento",path:"/unidades/:unidadeId/cadastrarAtendimento",component:Pn},{name:"idoso",path:"/unidades/:unidadeId/idosos/:idosoId",component:Rs},{name:"unidade",path:"/unidades/:id",component:Ka,meta:{requiresAdmin:!0}},{name:"unidades",path:"/unidades",component:Ta,meta:{requiresAdmin:!0}},{name:"adicionarUnidade",path:"/adicionarUnidade",component:Za,meta:{requiresAdmin:!0}},{name:"importarUnidade",path:"/importarUnidade",component:no,meta:{requiresAdmin:!0}},{name:"administradores",path:"/administradores",component:Jo,meta:{requiresAdmin:!0}},{name:"cadastrarIdoso",path:"/unidades/:unidadeId/cadastrarIdoso",component:rs,meta:{requiresPreceptor:!0}}],Nn=new ve["a"]({mode:"history",routes:Vn});Nn.beforeEach((function(e,t,a){var o=localStorage.getItem(c);if(e.matched.some((function(e){return e.meta.requiresAdmin}))){var s=JSON.parse(o);s&&"ADMINISTRADOR"===s.role?a():a({path:"/"})}else if(e.matched.some((function(e){return e.meta.requiresPreceptor}))){var n=JSON.parse(o);!n||"ADMINISTRADOR"!==n.role&&"PRECEPTOR"!==n.role?a({path:"/"}):a()}else a()}));var Tn=Nn;o["default"].use(pe.a,{iconPack:"fontawesome",duration:3e3,router:Tn}),o["default"].toasted.register("defaultSuccess",(function(e){return e.msg?e.msg:"Operação realizada com sucesso!"}),{type:"success",icon:"check"}),o["default"].toasted.register("defaultError",(function(e){return e.msg?e.msg:"Oops... Erro inesperado."}),{type:"error",icon:"times"});a("f9e3"),a("2dd8");var Dn=a("5f5b");o["default"].use(Dn["a"]);var Rn=function(e){return e},jn=function(e){if(401!==e.response.status)return Promise.reject(e);window.location="/"};d.a.interceptors.response.use(Rn,jn);a("4ec9"),a("3ca3"),a("ddb0");o["default"].use(h["a"]);var qn=new h["a"].Store({state:{packageVersion:"v2.6.2",isMenuVisible:!1,user:null,isLoadingApp:!0,syncStatus:{mode:"INDETERMINATED",status:null,progress:null,total:null,current:0,msg:""},pageParamsMap:new Map},mutations:{toggleMenu:function(e,t){e.user?e.isMenuVisible=void 0===t?!e.isMenuVisible:t:e.isMenuVisible=!1},setUser:function(e,t){e.user=t,t?d.a.defaults.headers.common["Authorization"]="bearer ".concat(t.token):delete d.a.defaults.headers.common["Authorization"]},setIsLoadingApp:function(e,t){e.isLoadingApp=t},SOCKET_syncStatusEvent:function(e,t){e.syncStatus=t,"SUCCESS"===e.syncStatus.status?o["default"].toasted.success("Importação de unidade finalizada",{action:{text:"Ver",push:{name:"unidades",dontClose:!0}}}):"ERROR"===e.syncStatus.status&&f(e.syncStatus.msg)},setPageParamsMap:function(e,t){var a=e.pageParamsMap.get(t.userId);if(a){var o=a.find((function(e){return e.filter==t.filter}));o?(o.filter=t.filter,o.order=t.order,o.page=t.page,o.rowsPerPage=t.rowsPerPage):a.push({filter:t.filter,order:t.order,page:t.page,rowsPerPage:t.rowsPerPage})}else e.pageParamsMap.set(t.userId,[{filter:t.filter,order:t.order,page:t.page,rowsPerPage:t.rowsPerPage}])}},getters:{appVersion:function(e){return e.packageVersion},getPageParamsMap:function(e){return e.pageParamsMap}}}),Mn=a("5132"),Bn=a.n(Mn),Ln=a("ecee"),Fn=a("c074"),Gn=a("b702"),zn=a("f2d1"),Hn=a("ad3d");Ln["c"].add(Fn["f"],Fn["d"],Fn["e"],Fn["c"],Gn["c"],zn["a"],Gn["a"],Gn["d"],Gn["b"],Fn["i"],Fn["o"],Fn["j"],Fn["m"],Fn["n"],Fn["a"],Fn["l"],Fn["h"],Fn["g"],Fn["k"],Fn["b"]),o["default"].component("font-awesome-icon",Hn["a"]),o["default"].component("font-awesome-layers",Hn["b"]),o["default"].component("font-awesome-layers-text",Hn["c"]),o["default"].config.productionTip=!1,o["default"].use(new Bn.a({debug:!0,connection:"https://imuni.app.br",vuex:{store:qn,actionPrefix:"SOCKET_",mutationPrefix:"SOCKET_"}})),new o["default"]({store:qn,router:Tn,render:function(e){return e(me)}}).$mount("#app")},"57f3":function(e,t,a){},"5c68":function(e,t,a){},"5ce0":function(e,t,a){},"62a9":function(e,t,a){"use strict";var o=a("5c68"),s=a.n(o);s.a},6698:function(e,t,a){},"672a":function(e,t,a){"use strict";var o=a("89c0"),s=a.n(o);s.a},6904:function(e,t,a){"use strict";var o=a("0230"),s=a.n(o);s.a},"6a5c":function(e,t,a){},"6c32":function(e,t,a){},"6e60":function(e,t,a){"use strict";var o=a("c479"),s=a.n(o);s.a},"6f17":function(e,t,a){"use strict";var o=a("cd6a"),s=a.n(o);s.a},7264:function(e,t,a){"use strict";var o=a("17a5"),s=a.n(o);s.a},"77df":function(e,t,a){},"80c6":function(e,t,a){},"85ec":function(e,t,a){},"89c0":function(e,t,a){},"8aa3":function(e,t,a){"use strict";var o=a("57f3"),s=a.n(o);s.a},"8e27":function(e,t,a){"use strict";var o=a("272e"),s=a.n(o);s.a},"8e99":function(e,t,a){},"905f":function(e,t,a){"use strict";var o=a("009d"),s=a.n(o);s.a},9551:function(e,t,a){"use strict";var o=a("32a6"),s=a.n(o);s.a},"9f34":function(e,t,a){"use strict";var o=a("6698"),s=a.n(o);s.a},"9f4a":function(e,t,a){"use strict";var o=a("6c32"),s=a.n(o);s.a},a09f:function(e,t,a){"use strict";var o=a("77df"),s=a.n(o);s.a},a35c:function(e,t,a){"use strict";var o=a("dbc7"),s=a.n(o);s.a},a405:function(e,t,a){"use strict";var o=a("a90e"),s=a.n(o);s.a},a52b:function(e,t,a){},a8fa:function(e,t,a){},a90e:function(e,t,a){},acb0:function(e,t,a){"use strict";var o=a("80c6"),s=a.n(o);s.a},bf6c:function(e,t,a){"use strict";var o=a("8e99"),s=a.n(o);s.a},c479:function(e,t,a){},cd6a:function(e,t,a){},d49b:function(e,t,a){"use strict";var o=a("2442"),s=a.n(o);s.a},dbc7:function(e,t,a){},dcee:function(e,t,a){"use strict";var o=a("fe7f"),s=a.n(o);s.a},df2f:function(e,t,a){},e526:function(e,t,a){"use strict";var o=a("ff67"),s=a.n(o);s.a},ee68:function(e,t,a){"use strict";var o=a("6a5c"),s=a.n(o);s.a},fe7f:function(e,t,a){},ff67:function(e,t,a){}});
//# sourceMappingURL=app.0a549f6d.js.map